请不吝点赞、订阅、转发、打赏支持明镜与点点栏目。有功能是非常的简单，所以呢之前我都没有讲。之前有小伙伴在群里面问，所以我也在群里面回答，就是使用触发器。那有的小伙伴就学会了，那有的小伙伴还是不太明白，因为这部分内容真的很简单，所以我之前是没有计划出这个视频的。但是既然还有小伙伴问，那今天我就把这个视频发出来。

今天我主要是讲两个东西，一个是用谷歌的触发器来触发这个函数，让它自动的发消息。另外我还会教大家怎么样手动的通过一个网址来触发事件。那现在就开始我们今天的教程吧。我们回到谷歌的Appscript，然后这个地方回到我们的机器人，我们新建一个文件，新建一个脚本文件叫做定时任务。好，把这个默论的代码删除，然后我们加入这样一个函数，我们利用这个函数来发送一条消息。这边ChartID就是填写你想要发送的对象，这边可以是一个Telegram的用户，也可以是Telegram的群。那这边是我自己的ID，所以这条消息会发给我。然后这边是消息的内容，所以你必須知道你要發送的群或者用戶的ID。那這個ID怎麼找呢？之前我出過一個數據庫的視頻，如果看過這個視頻的小夥伴，如果小夥伴們有跟著這個視頻建立一個數據庫，可以把機器人收到的消息存入數據庫，然後在數據庫裡面查到各種ID。我們保存一下，然後選擇這個，然後運行一下。应许完以后就可以看到这边收到一条这是一条定时发送的消息。这样一条消息是因为我看从这边运行的，实际上这个发送是这样一条消息。那这个消息是因为我刚才在这边运行的，它现在还不是定时任务，这是发送消息的。那我怎样把它变成一个定时的任务呢？其实非常的简单，你这边点击修改，然後點擊當前項目的觸發器，然後這邊點擊添加觸發器，這邊選擇我們剛剛寫的這個行數，然後這邊其實我們應該先部署一下，部署一下你可以選擇版本，我這邊有部署的話就選擇最新測試版，然后选择时间驱动，然后这边选择你可以选择一个特定的时间和日期。那今天我们这个演示里面我选择一个分钟定时器，然后每分钟，然后点击保存。好，那现在呢就一个触发器了，触发器已经设置好了，你也可以手动的触发，你可以在这个地方选择脚本自信，然后呢好已经完成了。完成以後呢可以看到這邊又發了一條過來，這是我手動出發的。那現在這個出發器已經設置好了，所以呢我現在不需要手動自發，它每一分鐘都會執行一次。所以我們現在把這個時間打開，那我們現在什麼也不動，等待一分鐘。好，看到沒有，它已經發了一條消息出來了。再上的時候剛才是到30幾秒的時候發了一條，那估計再到30幾秒就會發一條。好，又收到一條。好，所以每分鐘都會收到一條，你看這邊可以看到它發送了三次。好，然後這邊我們回到這裡。好，這個一直在發很討厭，所以我先把它上掉，我就把这个厨房级给删除了。现在我来演示一下怎么样发送图片。发送图片的话我们首先需要发个图片，这个简单的图片我们要得到图片的ID。所以呢我们要把这个图片首先发给我们的机器人，把这个图片发给机器人以后，因為這是個回生機器人，所以他會把圖片發給我，這沒有關係。現在我們就要找到這個圖片的ID，因為我之前我有設置這個數據庫，我會把所有收到的消息都記錄在數據庫裡面，可以看到我剛才收到的消息是這一條，這邊可以看到我的Photo的ID，然後我們選擇最高的分辨率也就是這個，這個的ID，這個就是我們圖片的ID。這邊我先加一個函數，這個函數是用來發送圖片的，然後呢也是發給我自己，我的ID，圖片的ID就是我們剛剛找到的ID，所以是這個ID，把它放在這個地方，然後保存一下。現在測試一下這個函數，看看是不是工作，我們把它把這個選擇然後運行，你看到這邊收到了，這就是我們剛才發的這個圖片。那現在我們就把這個設成定時任務，我們回到項目觸發器，添加觸發器，然後就選擇我們剛剛創建的那個送好这边要刷新一下，刷新一下页面，刷新完页面以后我们刚刚新加的函数才会出现，这边AutoSend Photo，同样的我们把它选择分钟定时器，每分钟保存，这样我们有一个新的触发器了。那当然你可以添加很多触发器，然后就可以做很多不同的事情。那我们现在把这个时间打开，那过一会我们就收到了，收到了。好，現在已經收到了，我把它刪了。關於這個MangoDB我要講一下，這個MangoDB我之前有一個視頻是介紹怎樣使用這個MangoDB的，但是我之前介紹大家使用的是那個MLab的網站，但是這個網站現在整個公司都已經被收購了，收夠以後呢，這網站不再允許新的用戶去註冊，所以呢，如果還沒有註冊過的小夥伴就用不了這個服務了。當然也有解決方法，我是自己又重新架設了一個服務器，用自己的服務器，那是用mangoDB怎樣自己架設的服務器呢，這個我可能後面會出個視頻教大家。那現在如果沒有mangoDB的朋友只能用其他的方法去取得图片的ID。好，我剛才說可以選建很多的觸發器，讓每個觸發器執行不同的函數，但實際上有時候我們也不需要很多的觸發器，如果我們是希望這條消息和這個圖片同一個時間被發送，我可以把它寫成一個單獨的函數，然後包含這兩個命令。我這邊加一個函數AutoTask，然後從這個函數裡面去分別的去調用這兩個函數，那麼我再把這個函數設置觸發器，我先保存一下，然後我現在先直接試一下這個函數運行，那我這樣運行的話它就會先調用這個再調用這個，所以會收到兩條消息，會收到這個和這個，所以直接兩條消息就收到了。我們也可以直接把這個行數設置成觸發器，這邊點添加觸發器，然後選擇AutoTask這個行數，然後再選擇分中定時器，每分鐘保存，回到Telegram，我們再來看看我們的時間，看到沒有，我們收到了兩條消息，同一個觸發器發出來的兩條消息。好，現在我就把它刪了，不然它會一直給我發。好了，這就是怎樣使用觸發器來完成一个定时的任务。如果你想提早触发这个事件，那你当然可以去触发器里面去像我刚才那边直接去执行这个脚本，那你要登录进来这边会比较麻烦，有没有一个非常简单的方法去触发它吗？可以哦，我们再加一点简单的代码就可以，我们到代码这个文件，然後在doGet裡面我們加一段代碼，我們加入這一段代碼，這段代碼很簡單，它的意思是說如果我的我收到一個HTTP的請求，然後在請求裡面有runAutoTask這個參數的話呢，我就會去跑這個命令，它就會觸發這個事件，這邊就是會把我們收到的倉書打印出來而已，然後我們這邊保存一下，保存完我們發布，發布的時候我們先把這個網址複製一下，複製完以後我們發布，好，發布完剛才那個網址就是我們的機器人的網址，如果你直接點進來呢，你會收到一個HoloWordNoneEastern Should Be Hidden，那這個網子的確是一個隱密的網子，我們不希望任何人知道，那用這個網子我們可以用來手動的觸發我們想要的觸發的事情，所以在這個地方我們加一個問號，我們加個問號，然後這邊我們剛才設置的参数叫做 runAutoTask，runAutoTask等于 true，其实等于什么都没关系，加一个东西就行了，好，等于 true，然后这时候会打显示出处来，那你同时会收到两条消息，那这是因为我们手动的触发了AutoTask这个参数，就是我登录这个网址的时候，我給了這個問號後面這段參數，那這個參數呢其實就會跑到這裡面的代碼來，然後它就會去跑這個AutoTask，那就是跑這裡，然後最後就會發這兩個消息出來，那這就是我們怎麼樣手動的去觸發我們想要觸發的任務。好了，是不是非常的簡單，因为这个触发器是Google Apps Script本身之带的一个功能，所以我们根本就不需要写多余的代码去写这个触发器，也不需要写什么计划任务什么的。好了，今天的教程就到这里，关于数据库的话，如果大家有兴趣的话，可以在视频下方给我留言。好了，那今天的教程就到这里，喜欢这个视频的话别忘了点赞、訂閱還有轉發，我們下期再見，拜拜。