请不吝点赞、订阅、转发、打赏，支持明镜与点点栏目。

就像一些自动禁言的机器人一样，有人加群的时候，我们会判断这个人是不是会发广告或者会发一些乱七八糟的东西，然后我们把它禁言。大多数这样的机器人都有维护自己的数据库，有他们自己的黑名单，然后根据这个黑名单来禁言这些新入群的用户。

那今天我没有介绍这么复杂，今天就是判断这个用户的名字，如果他的名字包含“广告”两个字，我们就把它给禁言或者是把它踢出去这样子。当然，你如果是根据这个用户的ID，然后在ID里面去查找你自己的数据库，然后根据你自己的数据库来对这个用户进行不同的操作呢，也是可以做到。我们第八节课有讲到数据库，所以说如果你想建一个自己的数据库，你就自己去建一个数据库，然后通过数据库来对用户进行操作。

OK，那我们就开始今天的教程吧。好，这边我首先打开了我们的Telegram机器人的代码，这是我们三节课的代码。那我们之前有讲过怎么样发送欢迎消息，也就是如果有人入群的话，我们发送一个欢迎的消息来欢迎这个人。那其实我们的禁言机器人也是一样的，使用的是有人入群这个事件，所以当有人入群的时候，我们去判断这个人，然后再根据这个人来做不同的操作。

那今天我们的判断非常简单，就判断这个人的名字是不是包含“广告”两个字，如果包含“广告”两个字，我们就把它禁言或者是说把它提出去也可以，这两个不同的操作我倒会演示一下。好，回到我们的代码，可以看到我们的代码里面这一块就是欢迎消息的一个处理，就是如果里面是一个NewChartMember的话呢，我们就会打出“你好，欢迎加入本群”这样一个消息。

那我们现在来先试一下这个代码，这个机器人测试群里面有我们的机器人，所以我现在要加一个人进来，我先把这个人移除，你看他这个机器人是工作的，你可以看到他移除的时候他会发一个消息。那我们先把他加进来，加进来可以看到“你好，分割新西兰，然后欢迎加入本群”，好，这个就是我们这个机器人发出来的消息，这两个消息是另外一个机器人发的，这边不要管它。

好，那说明这个是我们之前的机器人还正在工作，那我们就要改动这段代码来实现我们今天的一个用户的禁言。那现在我们先做第一个改动，这第一个改动就是我们不管这个用户是谁，一进来我们就把它给禁言了，之后我们再来加入对这个人的名字的判断。

好，我们之前这个机器人他还会在有人加入的时候发送一条新的欢迎消息，还会删除之前的欢迎消息，这块代码我们就不需要了。好，那这边就是发送欢迎消息的代码，那我们把它改一改，这个payout要改掉一个新的payout的上贴进来了。那这个payout它做什么呢，它就是用来限制一个用户，然后这边chartid就是我们的chartid，所以在这个地方我们可以看到应该是之前的代码是body.message.chatid，所以把这个复制一下，我再度一下。

好，这个地方改成这个，然后这个UserID应该是这个User的ID，然后这边UserID就是body.message.from的ID，这边就是这个用户可不可以发消息，可不可以发媒体消息，可不可以发其他消息，可不可以发网页预览，这边就是全部都是FORCE，也就是全部禁用，全部禁用，我们把这个删掉，这个就不要了。

好，那这样就是我们的最终代码，这边叫PALOTO2，所以我们把它改成PALOTO2，所以当我们有一个新的成员加入群的时候，我们就把它给进来。好，我们现在把这个保存一下，然后发布一下。我忘了一件很重要的事情，你要让这个机器人可以去管理这个群，可以去禁用用户的话，你要让这个机器人是管理员，因为现在这个机器人不是管理员，所以他做不了这个操作，所以我们现在把这个机器人加上管理员线。

好，这是我们的机器人，我们右键点击这个机器人，然后点promote.model.admin，然后这边save一下，那现在呢我们的机器人是管理员了。好，刚才犯了一个错误，这边应该是neutronMember.id，好这样子我们重新发布一下，我们现在把这个用户移除，然后把这个用户加回来。

OK，我们现在再来查扫一下LaysonActions，可以看到这个机器人做了什么事，把这个新用户的权限去掉事项。好，那么这已经工作了，那如果现在我回到这里，你就发现我这个用户就是刚才被移除的这个用户，他已经不能说话了，没有办法无法说话了，因为毕竟被那个机器人禁用了。

好，我们把它解禁一下，好，我们点到我们点manage group，然后这边有个restrictive users，然后点这个，然后把这个群够上，然后SaveClose，好，这样呢我们就把这个用户剪禁了，因为那个用户就剪禁了，好，又可以讲话了。

好，那这就是怎么样把一个新用户给禁用的方法，非常简单的一个方法。那现在呢我们就是说我们不要去盲目的去禁用所有新加入群的小伙伴，我们应该去做一些判断，然后再来对这个小伙伴进行操作。然后这边的例子非常简单，就是判断这个它的名字里面是不是有“广告”两个字，如果有“广告”两个字我们才进行安解，否则的话我们可能就不管它了。

OK，所以现在我们就等于是在我们的代码里面我们要加一个条件去判断这个，回到我们的代码，我们在这个地方我们加一个条件，就是我们在push这个payload之前，我们加一个条件，我们去判断Body.Message.NewChartMember，我们之前有一个叫gainname的方法，可以得到它的整个的用户名，所以我们这边直接call这个Membergainname，然后NewChartMember，这样子就会拿到它的名字，如果名字里面有什么有“广告”两个字，那我们就会把它给禁用，所以我们就用index of，那意思是“广告”大于等于0，如果名字中包含“广告”两个字，这条就会运行里面的代码，然后就把这个放进去，就是我们会把这个payout，否则的话就不把这个payout。

那当然这个条件的话，我们就可以加一些比较复杂的条件，如果你知道正则表达式的话，你就可以做一些比较复杂的判断，那我本人对正则表达式是非常的精通，所以你们如果有什么问题可以在群里面直接问我。那这边呢做演示的话，我就让它简单一些，好，我们存一下这个文件，好，保存完了，我们现在呢来发布一下，好，发布完成，那这时候呢我们重新来刚才的操作，如果我把这个用户加进来的话，它不应该被禁言了，因为它没有“广告”两个字，所以我现在把这个用户加进来，好，那现在的话我们来看一下我们群的操作纪录，发现已经没有