字幕提供这是我最大的动力。今天这个教程呢，我来教大家怎么样把Telegram机器人和YouTube的API整合在一起。我现在给大家演示一下我之前写的YouTube机器人。这个就是我写的YouTube机器人，它在这个群里面。所以我现在来输一个命令，这个命令回来了。这个命令SM其实是Search Me的缩写，Search me Fan Video。然后这样子呢，它返回来就是它返回来是频道名包含Fan的，也就是YuFanDen这个频道里面的视频。然后这边就是视频，然后这边可以放页，这就是之前我发过的所有视频，你可以页页的放，点击这个可以把这个消息删除。如果想搜索特定的视频的话，可以做videotelegram，这样它会返回telegram的视频收购结果，也就是说所有标题中包含telegram的视频就会返回来。这所有的视频其实就是用了YouTube的API从YouTube读出来的。复制下这个链接。这边还有另外一个命令叫做searchvideo，然后把这些删掉，我只保留ID，然后回车。这个命令它返回的是这个视频ID的视频的详细信息，你可以看到它的标题、地址、上传时间、频道，然后有0个彩、12个账、4个评论、416个点击。当然这个ID不需要是我频道里面的ID，可以任意的YouTube ID，他都可以搜索出内容了。

今天我就来教大家实现这样一个功能，通过YouTube API读取视频的详细信息。等大家学会了这个API，那么其他YouTube API大家就可以举一反三了，都是类似的。我们现在回到我们之前的Teams Textboard的项目，打开这个项目。我们现在先增加一个文件，新建一个脚本文件名叫YouTube，这边我们就写YouTube API的代码。那么这YouTube API的代码在哪里找？那我来告诉大家，点击资源，点击高级谷歌服务，然后往下方，这边一个YouTube Data API，我们点一下，然后会跳到这个页面。这时候我们再点一下YouTube Data API，然后点一下Reference，这边就是各种API，看你想要使用哪一个。那我们今天想要搜索YouTube的视频信息，所以是在Video这个里面，然后我们要找的是Video List这个API，点一下。点进来以后，这边其实就有一些示例，它这边有支持不同的语言，有Java、JavaScript、NodeJs、Python这些东西。然后这边它有一个你可以试的demo，所以说如果你这边放一个video的ID上去，然后这边点execute，它就会返回这个video的信息。你可以看到这个video的所有信息，所以我们要使用的就是这样一个API。然后这个就是视频的ID，你可以放任何视频ID进去，进来还可以看到这个视频的标题，然后它的描述，还有它的图标，还有其他的信息。

好，我往上翻，翻回来这个位置。我们想知道的是因为我们用的是Google的App Script，所我们点下More，这边有个App Script，点一下。然后这边就是我们需要用到的代码。这边代码里面包含一些其他的行数，比如说Remote Anti-Paras这个行数，我们也需要。我们需要点击Full Sample来显示所有我们需要的行数，这边就是所有我们需要的行数了。当然有一些是同用的行数，我们是只要复制一次就可以了就可以了。所以我這邊點複製，click to copy，複製完以後我們回到我們的代碼。好，這邊我們把這個關掉，然後把我們的代碼複製進來。好，我們保存一下。好，現在我們就可以測試了，用這個main這個method來測試，我們試一下。这时候我们运行的话会发现一个Reference Error，然后说YouTube未定义。这也是因为我们还没有把YouTube API打开，我们要手动的把它打开。所以我们回到支援，然后点高级谷歌服务，然后一直往下翻，翻到YouTube Data API，这边选V3，然后这边把这个这边勾在以后它会说这些服务必须在Google Cloud Platform API信息中启用。所以我们点击一下，点击进来后，我们会看到是在console.cloud.google.com这里，你会显示你现在当前的项目的名字是我们的Testboard2。然后这里我们要启用API和服务，点一下。然后这边搜索API服务，输入YouTube，输入YouTube以后你会看到这几个API，我们需要使用的是YouTube Data API v3，然后这边点一下，然后点启用。好，出现这个页面，这边有个停用API，这样子看到这个页面就是我们的API已经启用了，已经启用了。好，现在我们回到我们的机器人的位置，回到Google Apps Script，然后这个地方我们现在点确定，再来我们就把我们的YouTube的API给启动了。好，现在我们再跑一下。好，这边的时候他会说需要授权，我們點查看權限，然後選擇帳號，然後點擊允許。現在運行已經成功了，運行成功以後其實是會把它Brain Result 出來，也就是會把它Log 出來。Log 的話我們就可以在我們的日子裡面找到，點擊日子找不到日子我們再跑一次看看。好，跑完了，我们点击查看日志。好，出来了，这边就是我们把我们的YouTube的视频里面的信息全部打出来了，打在这个地方了。好，这样就说明我们的YouTube API已经正常了，可以使用了。好，我們把這個man最好改一個名字，改成TestYouTube吧，免得有衝突。好，現在我們不是要把它打印出來，我們要把它return回來，所以我們這邊加一行叫returnResponse，這樣我們等一下call這個function的時候，它就會把我們要的東西回復出來。

好，现在回到我们的代码，我们这边给它加一个新的命令。这边我们复制一下这个这一行，然后它在这个地方，这边我们加一个新的命令叫做就叫做SearchVideo吧。然后我们复制一下这个if，这样的话，如果有参数的话，我们只行这里面的代码，没有参数的话，直接这里面的代码。然后这里的话我们就可以说请提供请提供视频ID，如果没有视频ID的话。然后这里面我们就写Valvideoid等于paras1，然后我们来去call这个method，也就是videoListbarID这个method。我们把这段代码抄过来，复制一下，然后回到代码这里，我们粘贴一下。然后这边给来个变量，这个变量videos-i这个ID呢我们就是要我们自己的ID就是videoID这个地方，所以这个地方把它上掉换成videoID。然后这边我们把payload.txt设成这个，这个这边给它一个变量video等于video0，这个video是回来的这个宿主，也就是说你这边video ID 其实是可以用道号格开多个ID，它回来的话就是多个ID，所以这边是一个宿主。在我这个例子里面就当做只返回一个视频，所以我这边就取第0个视频，然後就取視頻裡面的標題，把它標題放在Text裡面打出來，這樣就可以把標題打出來了。我們來試一下，點發布，部署為網絡應用，版本號新建，把這個地方甚至列明，點更新。現在我們就有一個新的命令，我們來試一下，回到我們的機器人TimpTest Ball 2，點一下往這邊把這個命令鎖進來，這邊有個大小寫的問題，把這個改成小寫，這個必須是小寫的，必號發布新一鍵更新，確定。好，我們再來一次，請提供視頻ID，因為我們沒有提供視頻ID，所以就會有請提供視頻ID的問題。那我們就把這個視頻ID來插過來一下，這邊是search video。好，現在就有私人來貼了，回車。好，沒有反應，應該是出錯了。好，我們現在來我們之前教過怎樣調適，我們現在來調適一下，點擊TEST。好，我們把這個複製一下，這邊改成TEST SEARCH VIDEO，把這個放在這個地方，然後這邊拖到後面，我們把這個命令改成Search Video，然後把這個ID 附置過來。好，這樣就可以測試這個命令了。好，可以看到錯誤在 Undefined在298行的代碼文件，把這個停掉就是在這個地方我們的Video 回來是 Undefined。我們在這個地方放一個斷點，然後我們回到 Test，我們在 Do Pause 這邊放一個斷點，重新 Debug，停在 Do Pause 這裡，然後我們這邊點跟進，然後跳到代碼這個文件。這個時候我們點擊繼續調適，就會停在這個位置，我們可以看到我們的 Video ID 是進來了。這個原因是因為我們把 Video ID 變成小寫了，我們之前的代碼會把我們的所有的倉書變成小寫。那 Video ID 的話我們這裡我們不能把它變成小寫，因為變成小寫它是找不到了。我們可以看到這行代碼，我們把整個Message都變成小寫了，所以在我們分給 Paras 的时候它已经变成小写了。所以我们这边要稍微做一些处理，那这样呢就是我在把它变成小写之前我们就把它放在一个OrangeParas里面，然后这边是移除掉一些多余的空格。好，那现在呢我们就可以使用这个来读取我们之前没有变成小写的参数，所以回到这个地方，我们这个地方我们就不用Paras是用 Orange Paras，這樣我們就從沒有別人消息的裡面去讀這個 ID，保存一下。好，我們現在再來測試一下，我教大家一個更容易的測試方法，不需要去跟我們在最上面我們加一個新的 Function叫 Debug Code，直接输入debug，保存一下。在这个地方去跑的话跑debug code的话就可以自动断点在这里，我把断点放在这里，然后我们选择debug code，直接点击调试，它就直接停在这里了。刚才这边有一个错误就是这个地方必须是videoitems link，后来的确是一个数据是在Items裡面放入。好，這樣的話我們再來Debug，在這裡。好，這樣沒問題了。好，我們回到這邊看一下。好，這邊其實這個消息是對的，這個之前，這個，這個，這個是因為我之前定義的那個沒有上調。那現在可以看到標題Telegram 4 機械篇系列第一題，剛才那段多餘的字是從這邊出來的，所以這邊也會加等於，如果我們直接用等於的話就不會有這個多餘的字。好，我們現在運行一下，再來看一下。好，沒問題了，這樣我們就把標題打出來了。那如果你要打其他的信息了到底是一樣的。

好，这样我们就成功的读取了YouTube里面的信息。我们现在只是输出了标题，那如果你要输出其他的这个视频的信息呢，你就可以继续去读。那这边的话我们读的是Title，那你可以读它的Description或者其他的Publish Ad什么的，这些东西。那你可以把这个Video直接写到数据库里面去，然后你可以去看里面具体的内容，就像我之前第八集讲到之前第八集講到的怎樣使用mangodb，你就可以把這個東西寫到數據庫裡面，可以去查看它的具體的內容，比如像我這段代碼裡面我就是寫了它的這些信息，它的channel title，dislike count，like count這些東西。好，現在我們把它發布一下，新一鍵更新，確定。好，發布成功。那我們現在重新把這個面電數一次。好，回來了。那這是一個ID，我們現在隨便去YouTube找另外一個ID，我们把这个ID复制一下，回到我们的机器栏，我们同样输入searchmedia，然后这样，然后这样就出来了，这是标题。如果大家有需要用到其他的YouTube的Data API的话，大家直接在这边找一样的，比如说Channel List，它一样可以List by Channel ID，然后这里面你可以一样可以选择AppScript，然后你可以看到这个代码朝这个代码就可以了，你就不需要再复活sample了，因为这些代码是一样的，所以说你就只需要10年别就够了。

好，那今天的教程就到这里，有什么问题的话请在我的视频底下给我留言，喜欢我的视频的话请点赞订阅和转发，谢谢大家的观看，我们下期再见，拜拜。