大家好,我是芬哥。上一节课我们讲到怎么样用Telegramboard来处理简单的用户命令。一个用户命令只能处理一件事情的话,我们的机器人到最后可能会有很多的命令,因为你的机器人到后面可能会有很多的功能。如果你有100个不同的回复的东西的话,你就得用相同的100个命令去实现它。那這樣的話,最後機器人做出來的話,使用起來會非常的不方便。所以我們就需要把一些相關內容的命令把它放在一起,整合在一起。然後我們用一個主命令來處理所有相關的事物,然後我們用一個參數來具體的分辨這個命令是想做什麼。所以我們今天這個教程就是教大家怎樣來處理參數。

好,那現在進入我們的教程我們進入script.google.com,然後找到我們之前的那個項目點擊打開項目上級課我們寫了兩個命令,一個是 help,一個是 colors那我們現在再來試一下這個命令是不是還是工作的我們輸入 help,還有 colors非常好,他还是正常的工作者那这节课我们来加一个命令,我们来加一个list命令,然后这个list命令会列出我喜欢的YouTube频道所以呢我现在在这边复制一下这个if然后这边我加一个命令,我们叫list然後這個地方改成我喜歡的YouTube頻道,這邊加了一個Meaning,然後這個Meaning會列出這三個我喜歡的頻道的名稱,然後我們來發布一下。

好,发布完了,我们先去测试一下List已经工作了,虽然这边还没有显示出来,因为我们有更新命令列表但是List现在已经工作了现在我们想知道我们这个命令有没有带参数我在这个函数Payroll的最开始,我加了这么几行的代码,那我来解释一下给大家听。首先我把这个命令转成小写字母,因为我希望我的机器人不仅能处理大写字母,而且还可以处理小写字母。第二,如果这个命令包含我机器人的名字,我会把这个机器的名字给清掉。再含代码是我用空格把这个命令里面的每个字段分开然后这条代碼移除空的字段就是處理一些有時候用戶多輸了幾個空格的情況OK 那麼現在我們的命令就會被分成好幾個命令儲存在paras這個變量裡面所以回到我們的歷史命令我們就可以通過來判斷這個paras我們就可以知道我們到底有沒有倉數我們加一個ifParas1來判斷這個命令是不是帶参數,如果帶参數的話我們會輸出這個,如果沒有帶参數的話,就是我們原來的輸出,所以我們現在存一下,然後我們發布,發布完以後我們來試一下。你看到,它說你的命令帶參數,所以這個是有帶參數的,那如果沒有帶參數的話,還是輸出這個。

現在來處理我們這個參數,我們現在介紹一個新的命令叫Switch命令,它的EVE其實有相同的功能,但是它比EVE寫寫的更簡潔一些。我們switch,然後去判斷這個倉數。這個paras1就是第一個倉數,paras0就是命令本身。現在我加了代碼,這邊我們去判斷這個參數,如果參數是JS神技能,我們會打出這個。如果參數是悟空的日常,我們會打出這樣子,那如果是其他的,他會打出這樣子,這就是一個默認的狀態。好,我們來去測試一下。我們輸入List,然後我們跟上JS神技能然後我們點OK,它跑到墨量裡去了,說明我犯了一個錯誤因為我在上面的時候把所有的字母都改成小寫了所以JS神技能就無法被匹配所以這個地方其實它匹配的是小寫的JS神技能所以在這個地方Paras,我這邊要注入toLowerCase我要把它變成小寫字母以後再來做判斷好,我們現在把這個問題改正了,我們重新試一下我們這次來,這是悟空的日常好,這樣它打出來就是烏空的日常這個鏈接。

Switch命令比If命令它的優點就是说它写起来会比较少的代码但是它有它的缺点就是说它的条件是固定的它条件就是等于它必须是这个参数等于这个东西它没办法做到这个参数包含这个东西或者这个参数不是这个东西这样的条件并不是用在我们现在这种情况因为这个情况我们的参数是不固定的就是一種, 參數是不固定的所以我們現在我想把這個東西改成一個二級的命令我可以說,當我的參數是 people 的時候我可以說當我的參數是 people 的時候, 我列出我們這些人當我的參數是其他東西的時候呢, 我來列出我們的顏色那麼這個 people 在這個地方就是我們的二級命令我們發布所以我們現在 list 是我們的主命令people 是我們的參數我們可以當作二級命令所以它列出了這個那我們可以列出其他的比如說我們要列出 colors然後一級命令 二級命令列出了 colors那我們剛才說的把它列出鏈接的我們可以把它做成三級命令來做所以我們可以在這個地方我們加入ifparas2我們這邊做一個判斷,如果有第三個參數的話,如果有第三個參數的話,我們會處理這部分的命令,如果沒有第三個參數的話,我們就是跟剛才一樣,列出我們的頻道,這邊我們來加個if,我們這邊必須把它小寫,我們這邊加一個判斷,如果參數等於JS成績人的話,我們打出這段文字,同樣的我們給另外兩個頻道也是寫一樣的代碼那我們這邊還是用我的編輯神器來偷一下欄我們把這個鎖一下把其他清掉然後我們把這個倒進來然後我們要替換的是神技能把這個先關了我们要替换的是神技能这个神技能还有就是这个丸子好我们点confirm这样我们就把这个模板导进来了所以我们要把这个神技能贴到这里和这里然后要把这个丸子然后我们把这个组织的组织贴到这里这样我们就直接生成了这样的代码我们点复制然后替换掉这个好 现在我们的代码就有了那我們現在發布試一下我剛才這個地方漏了一個brick這個brick很重要,是不可以漏掉的我們重新來一次,list people我們這次換JX神技能好,這是工作的剛才說過我們處理了大小血所以說如果這邊我用的是JX神技能也是沒有問題的那有時候你會說我能不能簡單一點我说我不想去我不想去输入这么多的字去查询这个我可不可以简单的只是输入一些关键字呢当然是可以的我们只要把这个条件稍微换一下就可以了我们的条件要换成什么呢如果这个点index ofparas to大于等于0這樣意思是說如果我這段制服出來裡面包含了輸進的參數那我就會返回它按照我們這段代碼它會返回最後一個匹配的選項因為我們更換了模板所以我們重新生成這段代碼可以复制一下把這個貼掉好現在就是我們新的代碼保存一下我們發布一下好,現在我們來測試一下就是說我們list people然後如果只輸入Js也成功了因為這段字符裡面包含了Js,所以它就會成功我們再試一個list people空好,這樣就把悟空可以列出來了

好,今天的視頻就到這裡,如果大家喜歡我的視頻的話請幫我的視頻點個讚然後訂閱一下我的頻道下個視頻我會介紹怎麼樣再怎麼使用Telegram board回覆比較漂亮的消息回來比如說怎麼樣使用協定值出行值怎麼樣使用Markdown語言來邊寫你的消息此外使用HTML語言來避險你的消息今天就到這裡吧,我們下期再見,掰掰