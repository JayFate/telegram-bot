=== 第一个回声机器人_-_你是汤姆猫吧.txt ===
请不吝点赞、订阅、转发、打赏支持明镜与点点栏目。他就会直接工作了。

好，那现在开始我们的教程。首先我们来到谷歌，输入Google Script Console。那我们找到这个链接，这边是App Script。其实他的链接是Google.com/script/start，然后点击一下。然后这边有一个Start Scripting，点一下。

好，你现在就会进入他的Script的界面。这边我们给他一个标题，随便挤一个。我们挤一个跟我们的机器人一样的名字，叫做TimTestBotTo，然后我们点确定。好，现在我们已经创建了一个Google Script的项目，我们现在要把我们的代码添加进去。

好，现在我已经把这个代码贴进来了。贴进来以后我们只要改一个东西，就是这一串制服。这一串制服是代表了你的机器人。这串制服在哪里呢？回到Botfather，然后回到这边有个API Token，点一下，然后这边就出来了。这就是代表你机器人的制服。创回到这个地方，把它贴进来替换掉原来的。那么代码部分就完成了。

那我们现在先试一下我们的代码是不是工作的。你点发布，然后点部署为网络应用。然后这个地方项目兴建一个项目，然后以我自己的身份，然后这个地方授权是任何人可以授权给任何人，然后点击部署，然后点击查看权限，然后这边选择你自己的谷歌账号，然后点击允许。然后你会得到一个网络地址。那么这网络地址是你这个脚本的网络地址，最好保持它是隐秘的，不要让别人知道这个网址。

那现在我们来测试一下这个网址，点击最新代码，然后打开这个网页。你会看到HoloWord，如果你看到这个字样的时候，说明你的项目已经部署成功了。好，现在点击确定。这段代码到时候你们可以到我的网站去下载，然后你们到时候只要替换掉这个Token就可以了。

那现在我们知道最后一步。好，我们的谷歌脚本现在已经工作了，我们现在要把我们的谷歌脚本和机器人连在一起。我们要去机器人那边注册一下我们的谷歌脚本。我们会使用一个特殊的链接来做这件事情。这里这个链接就是用来注册我们的谷歌脚本。那这一串制服要换成你自己的机器人的API token。要注意这个BOT这边是不要替换的，替换的是从数字开始。

好，那现在我们去拿一下我们谷歌脚本的链接。我们不能用这个链接，因为这个链接是一个测试链接。我们回到我们的谷歌脚本，然后点发布，点部署为网络应用，然后在这个地方我们复制这个链接。复制完这个链接以后，我们到谷歌里面输入Online URL Encode，然后第一个链接我们点进去，然后我们把之前那个链接上贴进来，然后确保最后面是exec而不是dev，然后点Encode URL，然后你会得到这样一个链接。我们把这个链接复制一下，然后放到这个链接的最后面，然后你会得到一个超成的链接。那这个链接我们再来重复一遍，那这边是你机器人的token，那从这边开始是你谷歌的脚本的链接。

好，我们复制这个链接，把它放在浏览器的地址里面，然后点回车。好，现在你看到这个OK TrueResult TrueDescription Whiphook was set。如果你是看到这样的这样，那么恭喜你，你的机器人和你的谷歌脚本已经连在一起了。

好，现在我们来去测试一下我们的机器人。我刚才说过，我们这个机器人是一个回声机器人，也就是一个TAMU帽机器人。你说什么他就说什么。现在我们来试一下，我打什么他就给我回来什么。表情符号也是一样的。我在谷歌这边复制一个图片，随便复制一个图片，然后发给他，然后机器人把图片又发黄给我了。所以做机器人其实很简单。

我们再回来看一下我们之前的代码。之前脚本的代码就这么短短的几行，总共才不到60行。这是处理文本文件的，这是处理表情的，这是处理照片的。所以短短的代码就可以实现这些功能。下一个视频我会介绍怎样使用谷歌脚本来处理不同的命令。

那今天的教程就到这里，希望大家喜欢。可以的话，请帮我的视频点个赞，然后订阅一下我的频道。谢谢大家的观看，那我们下期再见，拜拜！

=== 理解群消息的格式_判断群消息的来源和处理有人入群_有人被踢等.txt ===
请不吝点赞、订阅、转发、打赏支持明镜与点点栏目。退群的时候，我们发生一个欢送的消息。还有就是有的消息被制定的时候，我们可以发生一个感谢的消息。然后我还会介绍一下从Telegram那边发给我们的机器人这边的消息的格式是怎么样子的，然后我们又是怎么样处理这些消息的。OK，那就开始我们的教程吧。

要让我们的机器人能够分辨不同的消息，我们必须理解一下Telegram发到我们机器人上面的消息的格式。这边是一个当有人加入一个群的时候，我们的机器人会收到的一个消息的格式。这个东西其实是我用的数据库，数据库的话我会在下节课的时候来介绍，这节课呢我们先忽略任何有关数据库的问题，所以你们有什么数据库的问题先不要问我，下节课的时候会讲。那在这个数据库里面，我记录了一个有人录取的消息。所以我们可以看到，我们先忽略这第一行，因为这第一行是数据库额外加进去的，那剩下的就是我们机器人收到的这样一个消息。所以我们知道在有人加入一个群的时候，我们会收到这样一条消息。然后这样一条消息的特征是它有一个这样三个东西：一个叫做New Chart Participant，还有一个是new chat member，还有一个new chat members。然后我们如果看到这样三个东西，我们就知道这是一个有人录取的消息。其实我们不需要去判断这三个东西，我们只需要判断这一个东西，我们就知道是有人录取了。

我来简单的介绍一下这个消息的格式。我们这个消息它首先有个update ID，我们现在可以忽略这个东西，我们主要关注的是这个message。这个Message ID呢就是代表某一条消息，在这个事例里面它代表的是一个有人录取的消息。所以我们可以用这个Message ID来对这个消息进行处理，比如说我们想要用机器人去删除一个消息的时候，我们会用到这个Message ID。From呢就是谁发这条消息，chart呢是在哪个群里面，然后new chat member就是谁被加进来了。所以从这条消息来看，就是由分割把这个人youtube channel这个机器人加进了华语原创联盟的这个群里面，是这样一个意思。

好，知道一样消息是这样一个格式以后，我们就可以来判断这个消息是一个怎么样的消息，然后做出相应的反应。好，我们回到我们的机器人。那在这个地方，我们已经写的时候其实我们是在判断这个消息有没有一个text。我们在判断这个消息有没有一个text。那我在这个地方，我们这个这个body，这个body呢其实是从e.postdata.contents，那这个contents实际上就是我刚才给你们看了这个整个东西，我把这整个东西放在body这个变量里面。所以说这个body代表的就是这整一个东西，所以body.message其实指的是这个message。然后这条消息是没有txt的对不对？我们换一条看一下，比如说这样一条消息，这样一条消息就是message是这个，然后txt是这个，所以这个就是一个文本的消息。我们机器人收到一个文本的消息，从这个群中由这个人发布的一个文本消息。我们这段代码其实判断的是这个消息是不是一个文本消息，如果是文本消息的话，我们处理一下，我们就预讯下面的代码。

那在我们这个配load里面，这个配load是我们机器人发送给Telegram那头的东西。那么就是说我们指定了我们的method是send message，意思是说我要发送一条消息，然后发送给谁呢？发送给这个chart id，就是这个chart id从哪来呢？就是body.message.chart id。所以一看的话可以看到是body.message.chat.id，就是这个东西。所以说我们知道一个chat id的时候，我们就可以给这个群发消息，我们知道这个群的id，我们就可以给它发消息了。然后这边指定的是我想发什么消息对不对？其他的是要markdown还是用html这种格式，这之前我讲过对不对？这个就是说我想把预览禁用掉。所以我们之前讲的课里面，我们其实已经是用到这样一个方式来判断我们的消息是一个怎样的消息，这个判断是判断这个消息是一个文本的消息。现在我们理解了这一点，我们就可以很容易的做到我们来判断这个消息是不是一个录取的消息。我想判断一个消息是不是录取的消息，这样做：if body.message.回到这个地方，我们知道我们要判断是不是有这个有这个成员，回到这里到这个我们这样子就可以就已经判断了是不是一个录取的消息。如果有人录取，我们就会执行这里面这些代码。

OK，所以我们现在要我们复制下这个payload来放在这个地方，然后我们这边return它。这里我们把这个消息换一下，保存一下。那好，那这样这种代表的意思就是说如果我发现这是一个有人录取你的消息，我们就发送这样一个消息回去。好，我们现在来试一下，我们发布一下。好，发布成功。好，这边我们来试一下，我现在加一个新的成员进来，我把这个机器人加进来。加进来没有生效，我知道为什么，因为我们在这个地方的时候，因为它去访问了这个TXT，但是因为这是一个录取消息，这边出错了，所以我要把这个代码把它移动到这个位置，让它在这段代码之前执行，所以就不必出错了。好，我们重新保存一下，发布一下。好，发布成功。我把这机器人移掉，重新把它加进来。好，你看到你好，欢迎加入本区。那这个呢就是我们刚刚写的代码。那这两个呢是我另外一个机器人，就是我现在正在服役的这个机器人发的消息，所以我们现在把它忽略到，这个是另外一个机器人发的消息，这个就是我们刚刚写的代码。这两个机器人都探测到这个录取消息，所以他发出了你好，欢迎加入本群这样一个消息。

但有时候我们想发送一些比较漂亮的消息，我们会说你好某某某，欢迎加入本群。那这个某某某就是这个新加入成员的名字。那怎么得到它呢？我们回来这边看一下这个消息，看到这个消息是NewCharmMember里面，其实它是有这个新成员的ID的，有它的ID，有它的名字对不对？所以我们可以读取这个信息来输出这个人的名字。所以我们如果要打出这个firstname的话呢，我们可以这样做：使用payload.txt等于你好加上body.message.newchartmember.firstname。这个firstname是我们从这个地方超过来了，这个firstname之间是有一个下滑线，你好这样在逗号，欢迎加入本群。好，我们把我们的text设成这样一条消息，那么它就会打出这个新成员的名字。我们发布试一下。好，发布成功。我们到机器人这里，我们重新来把这个机器人移除，再把它加回来。好，我们把这个东西，我们把这个新成员加进来。好，你看发布成功以后，你会看到你好Tim TextBoard 1，欢迎加入本群。有一些成员，它First Name和Last Name，所以有时候我们想把它结合起来，我们就可以写一个方法来得到这个新成员的名字。所以我们这边来加一个方法，这个方法叫Gain Name，它实际上就是把First Name和Last Name加在一起，但它会判断如果这个新成员有last name的话，就会把它加在一起，没有last name的话，它就会返回first name。所以这个地方我们可以直接使用这个方法来gain name，然后括号一直到这个位置。好，这样我转一下，这样它就会得到正确的名字，不管这个新成员有没有last name，有的话它就会显示last name，没有的话就不会显示。所以我们现在发布一下。好，发布成功。我们回到这里，我们重新把这个机器人加回来。好，把这个机器人加进来。好，这样可能是工作了，但是这个机器人它因为这是机器人嘛，所以它只有first name，所以它不会显示这个last name。这个时候我可以加一个别的成员试一下，现在如果随便加一个人进来，我随便加一个人进来，可以看到这样它就有first name last name，就会一起显示出来了。然后我把它从这边移出，可以看到这个是我正在服役的机器人，它打出这个名字是一个链接，你点按这个链接，它会显示这个机器人的消息的资料。所以说这个是怎么实现的呢？我先来给大家演示一下。

为了实现我刚才说的效果，我这边加了几个方法。首先这个就是主要的方法Get mentioned name，它这边其实就是用markdown一个语法把这个username表示成一个链接的形式，其实就是这个在game mention name里面，它其实是叫了这个method，这个就是这个实际上它就是一个这样的格式，所以变成一个链接。那我这边用了一个escape markdown，就是有一些用户名里面它可能会有一些下滑线或者是信号这种是markdown的语法，如果你碰到这种语法有时候就会出错，所以我们现在这边把它Escape一下，就是把这个比如说碰到像画线的时候，把它换成杠杠像画线，这样就不会出错了。所以我们现在把这个GateMentionName这个方法加进来了，我们替换掉这个GateName，GateMentionName，我们现在把它发布一下。好，现在应该OK了。我们把这个移除，然后把这个机器人加进来，看到你好TimTestable1，欢迎加入本群，看没有这个链接可以点了。那这样就是现了这个可以点的名字。同理可证，如果我们现在有人离群了，我们要发一套类似的消息，我们可以这样来做，我们复制这段代码，把它放在这里下，然后这边呢改成left chat member，意思是说我们这边如果是收到一条有人离取的消息的时候，我们要发一个消息，那我们可能就会说一路走好。好，这样子的话，我们就可以处理离取消息了。我们发布一下，就是发布的时候，发布的时候一定要记得这个地方要选新建行，否则会发布否则就没有发布成功。这边发布可以选之前的版本，是因为如果你觉得哎今天我发布这个版本不好，你这样使用旧的版本的话，那你可以选择之前旧的版本重新发布一下，那它就会回到之前旧的版本。好，我们来新建一个版本，我们发布一下。好，发布成功。然后回到机器人这地方，我们刚才是加了一个离取的功能，所以我们现在只要把这个机器人删除，我们就看到一个我们就会看到一条离取的消息。删掉以后，可以看到没有生效，我看一下这边是因为我这个地方忘了把这个换掉了，因为他这边是找不到这个，所以会出错，所以这个地方也要换掉。好，这两个压了好，我们现在重新发布一下。好，发布成功。我们现在把这个机器人加回来，把它加回来，加回来可以看到这条消息。现在我把这个机器人删掉。好，删掉看到这条消息，Tim TestBoard君，一路走好。好，我们现在等于是这两个代码可以处理了有人录群，有人出群。那如果有指令消息是怎样一个格式呢？我们来看一下，我之前有准备了一些机器人的消息的例子发在这个页面上，你们可以直接到我的博客里面找到它。这是有人加取的，这是有人退取的，有消息被置顶是这样一个格式，可以看到它是一个pinked message，所以我们如果看到这样一个东西，就知道是有消息被置顶。好，这边我们来加一段代码来处理这个置顶消息。置顶消息的话，就是我们判断是不是有pinked message，有的话呢，我这边就先得到是谁置顶这消息，然后置顶了谁的消息，然后这个text里面就说哎呀谁置顶了什么消息，然后代表这个发消息的人，感谢您。这是这条机器人做的。所以你回到回到这边可以看到这个消息，我们可以看到是这个人置顶了这条消息，然后是自顶了这个人发的消息。所以呢是Body的Message的From就是谁自顶的消息，Body的Message的Ping的Message的From就是最初发消息的那个人。好，我们现在保存一下，我们来发布。好，发布完成。我们来试一下。好，我们现在把这条消息自顶一下，自顶Ping一下，又没有生效，我看为什么。好，我把配肉給漏掉了。好，我把配肉添進來。好，最後就是長這樣。好，我們來重新發布一下。好，發布成功。好，我们重新来把这个消息给置顶一下。你看到，这是我原来机器人他发的消息，那这个是我们刚才这个机器人发的消息，消息是一样的，但是就是谁置顶的消息，本部代表发消息的人，感谢您。所以非常简单，当我们在判断一条消息是怎样的消息的时候，我们实际上就是判断这消息里面有某些元素在里面。怎么样得到这样的一个消息的内容呢？我会在下节课跟大家讲到。下节课我会介绍数据库，怎样在我们的机器人里面使用数据库，我们可以保存更多的东西到数据库里面。那加入了数据库以后，我们的机器人就可以变成非常的强大，有数据库和没有数据库，这完全是两个概念。我会介绍MangoDB，这是一个基于JSON的文本的数据库，所以你们是不需要学SQL的，这个数据库使用起来也非常的简单。

OK，那今天的教程就先到这里。喜欢我视频的朋友一定要记得帮我的视频点个赞，我这个视频系列看的人并不是很多，所以我其实一直是缺乏动力去更新它的，如果点赞的人多，就是对我最大的鼓励，我才会激起去继续把这个教程做下去。所以呢，请小伙伴一定要给我点个赞，当然希望每个小伙伴都可以订阅一下我的频道。OK，今天的教程就到这里，我们下期再见，拜拜。

=== 机器人的申请与设置.txt ===
TELGRAM 机器人TELGRAM 机器人TELGRAM 机器人Hello 大家好 我是芬哥今天我来给大家介绍一下怎么样申请和设置TELGRAM 的机器人TELGRAM 机器人实际上它的程序实际上是写在外面的它的功能可以开发的非常强大而且也很好玩想要有好玩的TELGRAM 机器人首先需要有一个TELGRAM 机器人的账号

今天我們先講一下怎麼樣申請這個機器人的帳號並進行一些簡單的設置那現在開始我們的教程首先我們打開Telegram這個程序然後在這個地方我們輸入BoatFarer也就是這個帳號那這個帳號實際上它是一個機器人的帳號也就是說它本身是一個機器人但是它管理的所有的其他機器人所以我們要申請一個新的機器人的話我們要通過這個機器人來申請点击下这个机器人然后你可以输入 helphelp 会打出这个机器人所有的可以用的命令今天我们首先要用到的命令是 new boat输入 new boat然后它这边要你起一个机器人的名字所以我们随便起一个名字叫 temp test boat 2

好,那机器人的名字呢,其实就像我们的名字一样,它只是一个给别人看的一个名字,那然后呢,你需要给这个机器人设置一个username,那username就有点像我们的身份证号,它就是一个账户的名字,所以让我们来给它一个账户名,那这个账户名呢,它一定要以BOT结尾,所以说我们就以刚才的名字再加个BOT来给它命名好了所以我们的命名是TimTestBOT2然后这边加一个BOT好了到这里其实你的机器人申请已经完成了你的机器人已经存在如果你点击你的机器人名字的话你就可以直接跟你的机器人聊天现在我们可以点击一下机器人那这边我们就进入了这个机器人的我们点start然后我们就可以跟机器人聊天了我们随便打一点东西过去当然了现在什么也不会发生因为我还没有写代码

好 现在我们来给我们的机器人做一些简单的设置因为你可以看到这边这个机器人你输入写干的时候他没有任何的命令出来是因为我没有做设置点击这个机器人的名字进到机器人的info面吧也没有太多的描述在这里回到Botfather那這邊我們輸入另外一個命令叫 MyBoat然後這邊會顯示出來你所有的機器人這兩個是我之前創建的機器人那這個是我剛剛創建機器人我們點擊一下然後這邊有一個EditBoat我們點擊EditBoat好 你們可以看到我們有一個名字但是剩下的都是沒有的我沒有描述 沒有關於 沒有照片也沒有任何的命令所以我们现在来一个个给它们加上去首先我们来加描述那么它这边发现消息说你要怎么样的描述呢所以说我们随便写一个好了那这样我们就有了一个描述那我们现在继续下去我们现在点back to boot点edit boot我们现在要给它一个光鱼所以我们点edit about这边是光鱼所以我们随便给它一个光鱼的描述然后回车好了,现在这样关于的描述也有了我们回到之前的edit board好,现在我们给它加一个图片所以我们点击edit board pick然后这时候它说请给我发一张照片那从这边发是不行的因为这边发的话是会发生文件所以我们需要去剪贴板我们需要从剪贴板给它发过去好,我们现在来去谷歌然后输入robot点图片然后选择这个图片那这边我们就随便找一张图片然后这边点Copy Image然后这边把它粘贴进来然后这边一定要选Send as a photo然后这边点Send好了,这样我们的机器人也有图片了但你看到这边,这边还是没有出现它的图片的图标,是因为它需要一段时间去更新好,回到BotFarer,我们点Back to Bot然后点Editor Bot,我们最后来编辑一下命令然后我们这边输入一个命令,比如说Help然后给它一个描述我们随便写一个描述这个新机器人什么也不会做然后我们回车好了这样我们的命令描述也登记完毕

那么这个机器人已经准备就绪了我们最后要做的就是写代码来处理机器人收到的消息下一期的视频我会给大家介绍一个简单的回声机器人那么他做的事情就是你发什么消息给他他就发什么消息给你就像他母猫一样我们现在已经完成了机器人的编辑让我们回到机器人的私聊频道我们这时候输入斜杠更新还没有到好我给大家发一个消息我现在发现这个图片已经更新成功了我们再来发一个斜杠好看这边这个新机能什么也不会做这就是这个命令已经出现了这是命令的描述所以我们现在输入help回车当然什么也不会发生就像我刚才说的一样我们还没有给他写任何的代码

那今天的教程就到这里喜欢我的视频的朋友请帮我点个赞然后订阅下我的频道谢谢大家的观看我们下期再见拜拜

=== 处理特定的命令.txt ===
大家好,我是芬哥。上节课我讲了怎么样建立一个简单的Telegram的回生机器人,也就是说你发什么东西给他,他就发还什么东西给你。今天我们来进阶一下这个课程,当我们发送指定命令到机器人的时候,机器人可以做出相应的回应。

我们发送不同的命令给机器人,机器人发回来的东西应该是不一样的。就像你发送一个help给机器人的时候,机器人应该回复你一个关于怎么样使用机器人的一个帮助文档。那你发送其他命令的时候,机器人就应该发送相应的文档回来。好,那我们就开始今天的教程吧。

我们回到Telegram机器人这里,我们输入血干的时候,它会弹出来一个命令,而且这个命令什么也不会做。所以我们现在需要多加几个命令,然后再给这几个命令指定不同的内容。我们在搜索然后输入boat,然后选择boat father,然后在这个地方输入myboat,然后选择我们现在要编辑的机器人,选择editboat,选择editcommands。所以我们现在给它加两个命令,我们这边重新输入命令的时候会把之前我们输入过的命令给覆盖掉,所以我们要全部重新输入过。所以这个help给它一个新的定义,然后我们按Ctrl Enter 来到下一行,现在我们输入另外一个新的命令是colors,然后这个命令就是列出机器人知道的所有颜色,然后我们点回车,然后成功了。

现在,我们回到这个现在,我们回到我们的ThemeTestBot2,这个时候我们如果输入输入斜干它还没有更新,我们随便输入一句话,再输入斜干,好,这个时候就更新出来了。所以你可以看到HELP是我知道很多颜色,请输入Colors查询,Colors是列出他知道的所有颜色。那我们现在输入HELP,它肯定就是跟之前一模一样,因为我们还没有写代码去做任何的改变,所以说它还是跟之前一样是一个回生机器人,我说什么他就说什么。那我们现在去我们的代码部分。

好,这是我们赛杰克讲到的代码,然后如果你找不到链接的话也是script.google.com,然后你可以找到你自己创建的这个谷歌的项目,然后这个代码就是我们之前所说的回声的代码,就是你说什么他就说什么。现在我们做一些小小的改变,让它来处理相对不同的命令。所有的文字命令是在这一块被处理的,在这个地方我们只要去查看这个文字的内容是什么,我们去判断不同的内容给出不同的答案,那么我们这个机器人就可以处理不同的命令了。

因为我们刚才加入了一个help命令和一个colors命令,所以我们现在就来对这两个命令做不同的回复。所以这个地方我们来写一段code,你可以写if,我们写if,好,我现在这边加了一段代码,那就是我去确认这个text的内容,如果这个内容是等于help的时候,那么它返回的是这样一个payload,而这两个东西我们并没有改变它是一样的,我们只是改变了这个text的内容,原来只是返回我们收到的text的内容,那现在我们返回的是这样的一句话。所以我们现在来试一下,我们现在点击保存,然后点击发布,然后部署为网络应用,这个时候项目版本从1我们把它改成一个新键,这个时候点更新,然后点确定,好,这样我们的机器人的新的代码就已经被发布了。那我们现在再来试一下我们的机器人,好,回到机器人的地方,我们输入票,好,你看他回来了我们刚才在代码里面写的东西,你好欢迎使用本机器人,本机器人现在责任是颜色,好,这就是他处理的 help 命令。那我们现在把同样的代码我们复制一下,那这个地方我们可以输入,我们刚才下一个命令是 colors,colors,那我们在收到colors这个命令的时候我们就要列出颜色,所以他可能知道了一些颜色,我们可以输入我们所知道的颜色红黄蓝,然后我们把它保存,然后这个时候同样的我们要发布一下不属于网络应用,然后这时候把项目改版本改成新键更新,然后点确定,好,这样呢我们这样一个新的命令又被完成了,我回到机器人去看一下,我们现在加了一条新的命令叫Colors,然后我们现在回车来看到机器人回来了红黄蓝,你看是不是非常简单写一个机器人,我们只是做一个简单的判断,然后回复不同的内容回来,那么这机器人就好像可以处理不同的命令了。

那这边我们的判断是一个简单的等于好的判断,也就是说如果用户输入了多余的制服他可能就不工作了,我们现在来试一下,我们输入help后面加了一些空格,我们再回车发现它还是一样工作的,也就是说这个空格可以被正常的处理,那我们来试一下前面放空格的情况,前面被放空格的情况也会被自然的处理,那是因为我们在输入这个文字的时候我们的客户端已经把这个空格前后的空格已经被拉给trim掉了,所以这个时候它还会正常的工作,但是有一种情况它就不会工作了,比如说这个机器是在群里面的时候,我们现在讲一下怎么样把这个机器人交到群里面,点击一下这个机器人的标题,然后在底下你会看到一个Add to Group,点一下然后把它加到我的群里面,问你要不要加到这个群里面,OK,好,我现在已经把这个Bot加到这个群里面,这是我原来的机器人,我原来的机器人欢迎这个新的机器人加入,这是另外一个机器人,所以不要混淆这个是我们现在正在写的机器人,那现在就是有一个问题,我们现在有两个的机器人,所以我们发一个Help 消息的时候到底是发给机器人A呢还是发给机器人B呢,所以这个时候我们就要告诉机器人我这句话是发给谁的,我们同样输入Help,你发现当你输入这个命令的时候它会弹出选项,你可以选择第一个机器人然后或者选择第二个机器人,那我们现在选择第一个机器人,我们选择这个我们刚才做的新的机器,我们点一下OK,然后发现它发送的是这样一个消息出去,它已经不是发单纯的help message,它后面有一个at,然后这个情况下我们没办法判断它是一个正常的help message,同样的如果我们输入color的话,我们color以后我们直接按tap去完成这个命令的补充回车,他没有办法知道这个命令是一个Colors的命令,他就把它当做其他普通的命令的补充,然后回车,那么他也是,他没有办法知道这个命令是一个Colors的命令,他就把它当做其他普通的命令,那他就回到了之前回升机器人的本色,你发什么东西给他,他发什么东西还给你了,那所以我们现在需要做一些简单的改变,回到我们代码,我们可以看到我们之前在check一个text的时候,我们是用等号来做的,如果我们想说我们只在意这个字符里面有没有slash help 这几个字,而不管它后面跟着是什么东西的话,我们可以这样做,我现在把这个等式做了一些改变,我们这个时候我们是去 check,如果这个 text是以这五个字母开头的话,那我们就会trigger这条Message,也就是说我们并不在乎后面跟着什么内容,只要它最前面五个字符是这个字符,那我们就会判断为是这个内容,我们现在把它保存一下,点发布,点部署为网络应用,这时候我们把项目版本改成新建,点更新,点确定,好的,那现在我们的机器人应该已经有不同的表现,我们现在去机器人那边看一看,回到我们的机器人,这个时候我们同样的,我们输入help,到时候我后面跟着一大堆的add的内容,我们回车,好,你看,你好欢迎使用本机器人,本机器人现在只能是颜色,也就是说我们现在我们的 help 命令已经被识别出来了,这时候我们输入 colors 呢是肯定还没有效果,因为 colors 还没有变,那我们回到代码,在代码这个地方,我们做同样的改变,所以我们把这一段复制粘贴到这个位置,然后把这边改成Colors,然后我们保存,也不足为网络应用新建,然后更新,确定,回到我们的机器人,我们输入Colors,刚才没有工作,因为这边少了一个点,我们把点加回去,然后我们重新发布一遍,点更新,因为这是一个网页版的编辑器,所以有时候它的实错功能不是很强大,所以说写代码的时候要非常的小心,像刚才一样我漏掉了一个点,那么它就不工作了,所以说如果你只要写错一点点你的机器人就会废掉,那以后我会跟大家讲一下怎样测试你的机器人,那现在呢我们先就直接发布,好,我们修复了刚才的问题,我们现在重新来一次,好,红环蓝就出来了,那这样就可以,即使是后面凳子一些乱七八糟的制服,我们也同样可以判断我们的证据的命令,当然我们可以跟着一些其他的内容,我们可以说HELP,然后跟任何东西其实都可以,因为这个时候我们的机器人并不会在乎后面跟着是什么内容,他一样会打出正确的回复,当然了,我们有时候我们想回来的是一个比较复杂的文本,那可能会有很多的回车,那我现在怎样怎么样在我们的文本里面加回车,回到我们的脚本,然后我们这个时候我们说我想把红环栏放在不同的行,所以我们跟着一个斜杠N,所以我们用斜杠N代替了原来的逗号,那么这个时候红环栏就会出现在不同的行中,我们可以现在点击保存,然后发布,项目版本新建,更新,然后点确定,现在我们回到我们的机器人,这个时候我们如果输入colors,看到这个文字就变成了红黄蓝,但是红黄蓝在不同的行,所以我们可以回复一些比较复杂的文本文字或者是一个段落,这样子呢这个机器人的用处就变得比较大了,你也可以用机器人返回一些HTML的链接,这样子的话机器人会自动把这些链接变成可电机的链接,不是我这个机器人,这个聊天Telegram会自动去render这些链接,这些东西,那我们再回到代码,我们稍微优化一下这个代码,这个代码有什么问题呢,就是我们其实在这个地方我们去重复了这个这个内容,因为你会有很多的if,所以呢你会有很多这个同样的内容,我们其实不需要去重复这个内容,我们可以把这个内容冒到外面,我们把这个内容放在外面,那么它就是作为一个默认的设置,那我们在不同if的时候呢,我们可以去改变这个text的值,所以我们可以在这个地方我们可以这样做,就是我们在确认这个 meaning是help meaning的时候,我们把这个text改掉,这两个东西我们保留不动,同样的道理,我们可以在这个地方把这句话复制到这里,那这个样子呢就是我们就省略掉了这个重复的这两个东西,所以呢你会看到我们的代码会简化很多,如果你是有很多的衣服的话,你的代码就不会有这么多重复的这两个东西,当然这个代码是还可以优化的,因为我们可以用一个switch来做,就不会有这么多的if,那这样我没有必要讲那么复杂,因为我们只是需要它工作,那这样的代码已经可以很好的工作了,那我们会在以后的课程中会用一些更高效更优化的代码,那我们现在才第二节课,所以我们把它尽量重减,好,我们现在来试一下,我们把它保存,然后发布一下,我们在这个机器人的手机上输入,我们在这个机器人的手机上输入,我们在这个机器人的手机上输入,我们在这个机器人的手机上输入,我们在这个机器人的手机上输入,回到我们的机器人,我们输入 help,同样的它还是工作的,同样的它还是工作的,同样的它还是工作的,然后我们再输入 colors,同样的它也还是工作的,同样的它也还是工作的,同样的它也还是工作的,同样的,它也还是工作的,所以我们刚才的代码做了一些小小的改变,但是它还是工作的,但是这个代码比原来的代码会比较优化一些,那好,我们今天的教程就到这里,下节课我们会讲一讲怎样去处理代参数的命令,就是说一个命令我们可以跟着不同的参数,那么通过不同的参数我们返回来不同的内容,比如说我们有一个命令是查询某个人的信息,我们可以比如说find或者look search无所谓命令叫什么,你可以就是说search然后某个人,某个人search邓子齐,然后他就回来所有关于邓子齐的信息,可以这样子对不对,所以说我们不需要写很多的命令去给回来不同的信息,我们可以用同样一个命令但是用不同的参数他就回来不同的信息,那下期课我们不见不上,拜拜,哦,差点忘了,如果喜欢我的视频的话,请帮我点个赞,然后订阅一下我的频道,好,这次是真的拜拜了,拜拜,相关的下载你们可以直接到图片上这个网址去下载,好,今天的教程就到这里,谢谢大家观看,请大家多多点赞多多订阅,拜拜。

=== 处理带参数的命令.txt ===
大家好,我是芬哥。上一节课我们讲到怎么样用Telegramboard来处理简单的用户命令。一个用户命令只能处理一件事情的话,我们的机器人到最后可能会有很多的命令,因为你的机器人到后面可能会有很多的功能。如果你有100个不同的回复的东西的话,你就得用相同的100个命令去实现它。那這樣的話,最後機器人做出來的話,使用起來會非常的不方便。所以我們就需要把一些相關內容的命令把它放在一起,整合在一起。然後我們用一個主命令來處理所有相關的事物,然後我們用一個參數來具體的分辨這個命令是想做什麼。所以我們今天這個教程就是教大家怎樣來處理參數。

好,那現在進入我們的教程我們進入script.google.com,然後找到我們之前的那個項目點擊打開項目上級課我們寫了兩個命令,一個是 help,一個是 colors那我們現在再來試一下這個命令是不是還是工作的我們輸入 help,還有 colors非常好,他还是正常的工作者那这节课我们来加一个命令,我们来加一个list命令,然后这个list命令会列出我喜欢的YouTube频道所以呢我现在在这边复制一下这个if然后这边我加一个命令,我们叫list然後這個地方改成我喜歡的YouTube頻道,這邊加了一個Meaning,然後這個Meaning會列出這三個我喜歡的頻道的名稱,然後我們來發布一下。

好,发布完了,我们先去测试一下List已经工作了,虽然这边还没有显示出来,因为我们有更新命令列表但是List现在已经工作了现在我们想知道我们这个命令有没有带参数我在这个函数Payroll的最开始,我加了这么几行的代码,那我来解释一下给大家听。首先我把这个命令转成小写字母,因为我希望我的机器人不仅能处理大写字母,而且还可以处理小写字母。第二,如果这个命令包含我机器人的名字,我会把这个机器的名字给清掉。再含代码是我用空格把这个命令里面的每个字段分开然后这条代碼移除空的字段就是處理一些有時候用戶多輸了幾個空格的情況OK 那麼現在我們的命令就會被分成好幾個命令儲存在paras這個變量裡面所以回到我們的歷史命令我們就可以通過來判斷這個paras我們就可以知道我們到底有沒有倉數我們加一個ifParas1來判斷這個命令是不是帶参數,如果帶参數的話我們會輸出這個,如果沒有帶参數的話,就是我們原來的輸出,所以我們現在存一下,然後我們發布,發布完以後我們來試一下。你看到,它說你的命令帶參數,所以這個是有帶參數的,那如果沒有帶參數的話,還是輸出這個。

現在來處理我們這個參數,我們現在介紹一個新的命令叫Switch命令,它的EVE其實有相同的功能,但是它比EVE寫寫的更簡潔一些。我們switch,然後去判斷這個倉數。這個paras1就是第一個倉數,paras0就是命令本身。現在我加了代碼,這邊我們去判斷這個參數,如果參數是JS神技能,我們會打出這個。如果參數是悟空的日常,我們會打出這樣子,那如果是其他的,他會打出這樣子,這就是一個默認的狀態。好,我們來去測試一下。我們輸入List,然後我們跟上JS神技能然後我們點OK,它跑到墨量裡去了,說明我犯了一個錯誤因為我在上面的時候把所有的字母都改成小寫了所以JS神技能就無法被匹配所以這個地方其實它匹配的是小寫的JS神技能所以在這個地方Paras,我這邊要注入toLowerCase我要把它變成小寫字母以後再來做判斷好,我們現在把這個問題改正了,我們重新試一下我們這次來,這是悟空的日常好,這樣它打出來就是烏空的日常這個鏈接。

Switch命令比If命令它的優點就是说它写起来会比较少的代码但是它有它的缺点就是说它的条件是固定的它条件就是等于它必须是这个参数等于这个东西它没办法做到这个参数包含这个东西或者这个参数不是这个东西这样的条件并不是用在我们现在这种情况因为这个情况我们的参数是不固定的就是一種, 參數是不固定的所以我們現在我想把這個東西改成一個二級的命令我可以說,當我的參數是 people 的時候我可以說當我的參數是 people 的時候, 我列出我們這些人當我的參數是其他東西的時候呢, 我來列出我們的顏色那麼這個 people 在這個地方就是我們的二級命令我們發布所以我們現在 list 是我們的主命令people 是我們的參數我們可以當作二級命令所以它列出了這個那我們可以列出其他的比如說我們要列出 colors然後一級命令 二級命令列出了 colors那我們剛才說的把它列出鏈接的我們可以把它做成三級命令來做所以我們可以在這個地方我們加入ifparas2我們這邊做一個判斷,如果有第三個參數的話,如果有第三個參數的話,我們會處理這部分的命令,如果沒有第三個參數的話,我們就是跟剛才一樣,列出我們的頻道,這邊我們來加個if,我們這邊必須把它小寫,我們這邊加一個判斷,如果參數等於JS成績人的話,我們打出這段文字,同樣的我們給另外兩個頻道也是寫一樣的代碼那我們這邊還是用我的編輯神器來偷一下欄我們把這個鎖一下把其他清掉然後我們把這個倒進來然後我們要替換的是神技能把這個先關了我们要替换的是神技能这个神技能还有就是这个丸子好我们点confirm这样我们就把这个模板导进来了所以我们要把这个神技能贴到这里和这里然后要把这个丸子然后我们把这个组织的组织贴到这里这样我们就直接生成了这样的代码我们点复制然后替换掉这个好 现在我们的代码就有了那我們現在發布試一下我剛才這個地方漏了一個brick這個brick很重要,是不可以漏掉的我們重新來一次,list people我們這次換JX神技能好,這是工作的剛才說過我們處理了大小血所以說如果這邊我用的是JX神技能也是沒有問題的那有時候你會說我能不能簡單一點我说我不想去我不想去输入这么多的字去查询这个我可不可以简单的只是输入一些关键字呢当然是可以的我们只要把这个条件稍微换一下就可以了我们的条件要换成什么呢如果这个点index ofparas to大于等于0這樣意思是說如果我這段制服出來裡面包含了輸進的參數那我就會返回它按照我們這段代碼它會返回最後一個匹配的選項因為我們更換了模板所以我們重新生成這段代碼可以复制一下把這個貼掉好現在就是我們新的代碼保存一下我們發布一下好,現在我們來測試一下就是說我們list people然後如果只輸入Js也成功了因為這段字符裡面包含了Js,所以它就會成功我們再試一個list people空好,這樣就把悟空可以列出來了

好,今天的視頻就到這裡,如果大家喜歡我的視頻的話請幫我的視頻點個讚然後訂閱一下我的頻道下個視頻我會介紹怎麼樣再怎麼使用Telegram board回覆比較漂亮的消息回來比如說怎麼樣使用協定值出行值怎麼樣使用Markdown語言來邊寫你的消息此外使用HTML語言來避險你的消息今天就到這裡吧,我們下期再見,掰掰

=== Telegram_Bot_高级应用_-集成其它服务_-_谷歌Youtube_Data_API_示例.txt ===
字幕提供这是我最大的动力。今天这个教程呢，我来教大家怎么样把Telegram机器人和YouTube的API整合在一起。我现在给大家演示一下我之前写的YouTube机器人。这个就是我写的YouTube机器人，它在这个群里面。所以我现在来输一个命令，这个命令回来了。这个命令SM其实是Search Me的缩写，Search me Fan Video。然后这样子呢，它返回来就是它返回来是频道名包含Fan的，也就是YuFanDen这个频道里面的视频。然后这边就是视频，然后这边可以放页，这就是之前我发过的所有视频，你可以页页的放，点击这个可以把这个消息删除。如果想搜索特定的视频的话，可以做videotelegram，这样它会返回telegram的视频收购结果，也就是说所有标题中包含telegram的视频就会返回来。这所有的视频其实就是用了YouTube的API从YouTube读出来的。复制下这个链接。这边还有另外一个命令叫做searchvideo，然后把这些删掉，我只保留ID，然后回车。这个命令它返回的是这个视频ID的视频的详细信息，你可以看到它的标题、地址、上传时间、频道，然后有0个彩、12个账、4个评论、416个点击。当然这个ID不需要是我频道里面的ID，可以任意的YouTube ID，他都可以搜索出内容了。

今天我就来教大家实现这样一个功能，通过YouTube API读取视频的详细信息。等大家学会了这个API，那么其他YouTube API大家就可以举一反三了，都是类似的。我们现在回到我们之前的Teams Textboard的项目，打开这个项目。我们现在先增加一个文件，新建一个脚本文件名叫YouTube，这边我们就写YouTube API的代码。那么这YouTube API的代码在哪里找？那我来告诉大家，点击资源，点击高级谷歌服务，然后往下方，这边一个YouTube Data API，我们点一下，然后会跳到这个页面。这时候我们再点一下YouTube Data API，然后点一下Reference，这边就是各种API，看你想要使用哪一个。那我们今天想要搜索YouTube的视频信息，所以是在Video这个里面，然后我们要找的是Video List这个API，点一下。点进来以后，这边其实就有一些示例，它这边有支持不同的语言，有Java、JavaScript、NodeJs、Python这些东西。然后这边它有一个你可以试的demo，所以说如果你这边放一个video的ID上去，然后这边点execute，它就会返回这个video的信息。你可以看到这个video的所有信息，所以我们要使用的就是这样一个API。然后这个就是视频的ID，你可以放任何视频ID进去，进来还可以看到这个视频的标题，然后它的描述，还有它的图标，还有其他的信息。

好，我往上翻，翻回来这个位置。我们想知道的是因为我们用的是Google的App Script，所我们点下More，这边有个App Script，点一下。然后这边就是我们需要用到的代码。这边代码里面包含一些其他的行数，比如说Remote Anti-Paras这个行数，我们也需要。我们需要点击Full Sample来显示所有我们需要的行数，这边就是所有我们需要的行数了。当然有一些是同用的行数，我们是只要复制一次就可以了就可以了。所以我這邊點複製，click to copy，複製完以後我們回到我們的代碼。好，這邊我們把這個關掉，然後把我們的代碼複製進來。好，我們保存一下。好，現在我們就可以測試了，用這個main這個method來測試，我們試一下。这时候我们运行的话会发现一个Reference Error，然后说YouTube未定义。这也是因为我们还没有把YouTube API打开，我们要手动的把它打开。所以我们回到支援，然后点高级谷歌服务，然后一直往下翻，翻到YouTube Data API，这边选V3，然后这边把这个这边勾在以后它会说这些服务必须在Google Cloud Platform API信息中启用。所以我们点击一下，点击进来后，我们会看到是在console.cloud.google.com这里，你会显示你现在当前的项目的名字是我们的Testboard2。然后这里我们要启用API和服务，点一下。然后这边搜索API服务，输入YouTube，输入YouTube以后你会看到这几个API，我们需要使用的是YouTube Data API v3，然后这边点一下，然后点启用。好，出现这个页面，这边有个停用API，这样子看到这个页面就是我们的API已经启用了，已经启用了。好，现在我们回到我们的机器人的位置，回到Google Apps Script，然后这个地方我们现在点确定，再来我们就把我们的YouTube的API给启动了。好，现在我们再跑一下。好，这边的时候他会说需要授权，我們點查看權限，然後選擇帳號，然後點擊允許。現在運行已經成功了，運行成功以後其實是會把它Brain Result 出來，也就是會把它Log 出來。Log 的話我們就可以在我們的日子裡面找到，點擊日子找不到日子我們再跑一次看看。好，跑完了，我们点击查看日志。好，出来了，这边就是我们把我们的YouTube的视频里面的信息全部打出来了，打在这个地方了。好，这样就说明我们的YouTube API已经正常了，可以使用了。好，我們把這個man最好改一個名字，改成TestYouTube吧，免得有衝突。好，現在我們不是要把它打印出來，我們要把它return回來，所以我們這邊加一行叫returnResponse，這樣我們等一下call這個function的時候，它就會把我們要的東西回復出來。

好，现在回到我们的代码，我们这边给它加一个新的命令。这边我们复制一下这个这一行，然后它在这个地方，这边我们加一个新的命令叫做就叫做SearchVideo吧。然后我们复制一下这个if，这样的话，如果有参数的话，我们只行这里面的代码，没有参数的话，直接这里面的代码。然后这里的话我们就可以说请提供请提供视频ID，如果没有视频ID的话。然后这里面我们就写Valvideoid等于paras1，然后我们来去call这个method，也就是videoListbarID这个method。我们把这段代码抄过来，复制一下，然后回到代码这里，我们粘贴一下。然后这边给来个变量，这个变量videos-i这个ID呢我们就是要我们自己的ID就是videoID这个地方，所以这个地方把它上掉换成videoID。然后这边我们把payload.txt设成这个，这个这边给它一个变量video等于video0，这个video是回来的这个宿主，也就是说你这边video ID 其实是可以用道号格开多个ID，它回来的话就是多个ID，所以这边是一个宿主。在我这个例子里面就当做只返回一个视频，所以我这边就取第0个视频，然後就取視頻裡面的標題，把它標題放在Text裡面打出來，這樣就可以把標題打出來了。我們來試一下，點發布，部署為網絡應用，版本號新建，把這個地方甚至列明，點更新。現在我們就有一個新的命令，我們來試一下，回到我們的機器人TimpTest Ball 2，點一下往這邊把這個命令鎖進來，這邊有個大小寫的問題，把這個改成小寫，這個必須是小寫的，必號發布新一鍵更新，確定。好，我們再來一次，請提供視頻ID，因為我們沒有提供視頻ID，所以就會有請提供視頻ID的問題。那我們就把這個視頻ID來插過來一下，這邊是search video。好，現在就有私人來貼了，回車。好，沒有反應，應該是出錯了。好，我們現在來我們之前教過怎樣調適，我們現在來調適一下，點擊TEST。好，我們把這個複製一下，這邊改成TEST SEARCH VIDEO，把這個放在這個地方，然後這邊拖到後面，我們把這個命令改成Search Video，然後把這個ID 附置過來。好，這樣就可以測試這個命令了。好，可以看到錯誤在 Undefined在298行的代碼文件，把這個停掉就是在這個地方我們的Video 回來是 Undefined。我們在這個地方放一個斷點，然後我們回到 Test，我們在 Do Pause 這邊放一個斷點，重新 Debug，停在 Do Pause 這裡，然後我們這邊點跟進，然後跳到代碼這個文件。這個時候我們點擊繼續調適，就會停在這個位置，我們可以看到我們的 Video ID 是進來了。這個原因是因為我們把 Video ID 變成小寫了，我們之前的代碼會把我們的所有的倉書變成小寫。那 Video ID 的話我們這裡我們不能把它變成小寫，因為變成小寫它是找不到了。我們可以看到這行代碼，我們把整個Message都變成小寫了，所以在我們分給 Paras 的时候它已经变成小写了。所以我们这边要稍微做一些处理，那这样呢就是我在把它变成小写之前我们就把它放在一个OrangeParas里面，然后这边是移除掉一些多余的空格。好，那现在呢我们就可以使用这个来读取我们之前没有变成小写的参数，所以回到这个地方，我们这个地方我们就不用Paras是用 Orange Paras，這樣我們就從沒有別人消息的裡面去讀這個 ID，保存一下。好，我們現在再來測試一下，我教大家一個更容易的測試方法，不需要去跟我們在最上面我們加一個新的 Function叫 Debug Code，直接输入debug，保存一下。在这个地方去跑的话跑debug code的话就可以自动断点在这里，我把断点放在这里，然后我们选择debug code，直接点击调试，它就直接停在这里了。刚才这边有一个错误就是这个地方必须是videoitems link，后来的确是一个数据是在Items裡面放入。好，這樣的話我們再來Debug，在這裡。好，這樣沒問題了。好，我們回到這邊看一下。好，這邊其實這個消息是對的，這個之前，這個，這個，這個是因為我之前定義的那個沒有上調。那現在可以看到標題Telegram 4 機械篇系列第一題，剛才那段多餘的字是從這邊出來的，所以這邊也會加等於，如果我們直接用等於的話就不會有這個多餘的字。好，我們現在運行一下，再來看一下。好，沒問題了，這樣我們就把標題打出來了。那如果你要打其他的信息了到底是一樣的。

好，这样我们就成功的读取了YouTube里面的信息。我们现在只是输出了标题，那如果你要输出其他的这个视频的信息呢，你就可以继续去读。那这边的话我们读的是Title，那你可以读它的Description或者其他的Publish Ad什么的，这些东西。那你可以把这个Video直接写到数据库里面去，然后你可以去看里面具体的内容，就像我之前第八集讲到之前第八集講到的怎樣使用mangodb，你就可以把這個東西寫到數據庫裡面，可以去查看它的具體的內容，比如像我這段代碼裡面我就是寫了它的這些信息，它的channel title，dislike count，like count這些東西。好，現在我們把它發布一下，新一鍵更新，確定。好，發布成功。那我們現在重新把這個面電數一次。好，回來了。那這是一個ID，我們現在隨便去YouTube找另外一個ID，我们把这个ID复制一下，回到我们的机器栏，我们同样输入searchmedia，然后这样，然后这样就出来了，这是标题。如果大家有需要用到其他的YouTube的Data API的话，大家直接在这边找一样的，比如说Channel List，它一样可以List by Channel ID，然后这里面你可以一样可以选择AppScript，然后你可以看到这个代码朝这个代码就可以了，你就不需要再复活sample了，因为这些代码是一样的，所以说你就只需要10年别就够了。

好，那今天的教程就到这里，有什么问题的话请在我的视频底下给我留言，喜欢我的视频的话请点赞订阅和转发，谢谢大家的观看，我们下期再见，拜拜。

=== Telegram_Bot_电报聊天机器人连接_RestHeart_MongoDB_数据库.txt ===
字幕提供但是新用户怎么办呢有没有一个替代的方案其实是有的其实我早就开始在使用另外一个方案了当然我现在是有的机器人在使用MLab然后有些新的机器人现在也在使用一个新的方案它叫RiskHot今天我就会给大家演示一下怎么样使用这个RiskHotRiskHot是一个软件这个软件呢把MangoDB的接口转换成RiskFood的接口那么我们的Google Apps Script就可以去访问它了今天我就来演示一下怎么样使用RiskHard那当然关于怎么样搭建一个RiskHard服务器我在最后也会讲到RiskHard的查看非常简单我们只要有一个浏览器我们输入这个网址就可以看到这个数据库里面的所有的集合可以看到我们现在有三个集合Delimit, Test, TestCore如果我们来看到这集合里面的内容我们就可以把这个集合的名字复制一下然后放在这个里面然后回转再可以看到这几盒里面的内容这几盒里面有几个文档两个文档然后每个文档里面的内容是这个其实就是个Test Test另外一个也是Test Test就是我之前测试插入的两个文档但你在这边看会觉得不是很好看的话你可以把这个东西复制一下然后放到这个网站上来这个叫做JsonEditOnline把它粘贴进来这里粘贴键要点这个Format一下可以看到这样子就比较好看就可以看到哪個文端很清楚但你也可以點一下這個按鈕把這個文章到這條來那可以看到這樣一個可以更好的去Folding可以把它Fold起來這樣就更好的去做Navigation那這樣呢就是數據庫的防衛那這樣只是一個Gate method如果你想要去更改這個速度过的那种的话,用浏览器就做不到所以这边还推荐另外一个软件叫PostmanPostman,这是一个免费的软件所以在你下载完这个软件以后点按这个new,创建一个新的request然后呢,就可以创建一个像这样的东西然后这边选择method gate,这边输入我们的网址然后user2,然后这边点按send然後它就會回來我們的內容了然後這邊它已經翻你format好了所以就比較好看那這邊你要輸入用戶名額密碼authorization這個位置然後輸入用戶名額密碼就是這個用戶名額這個密碼你只要輸進去就可以了在瀏覽器中輸入的時候也是輸入這個用戶名額密碼輸完以後你就可以去使用它了你看這樣就回來了同樣的你比如說test複製一下然後放在這個位置然後你send然后它就会回来一个这个集合里面的文档其实就是一个HelloWord好当然你也可以使用这个来去更改数据库比如说你可以这里用put method然后去加一个数据库比如说我用来加一个数据库叫做test tool加一个新的数据库叫test tool然后加一个点send好这样子这样的话红星应该已经有了一个新的数据库这时候我们回到get我们看看我们的user2这个数据库里面是不是有多雷的集合出来看到多雷的集合出来叫test2然后这样就送一个新的数据集合同样的如果回到流浪器这个地方然后我们回到这里看一下你可以看到这边有多雷的叫做test2的集合出来这样就是我们怎么去操作我们的restart数据库当然这个其实跟我们之前操作mnap是差不多的只是我之前沒有介紹從游覽器或是從波士裡面去操作所有這些操作我們都可以在代碼裡面去實現所以我們現在回到我們的代碼我就大家怎麼樣在代碼裡面去使用這個數據庫回到我們的代碼然後這是我們原來的MLab的這個數據庫的操作那現在呢我要把這個刪掉因為會衝突所以先把它刪掉刪除以後我加了一個新的RishHard的数据库操作文件进来这个代码呢我会直接提供在我的网站上到时候你们直接在我视频聊数里面去找这个代码的网址有这个以后呢我们就可以去做一些测试当然因为我们用了一个新的数据库所以我们的代码要注意一点点改变我们看一下我们之前原来的代码其实我原来代码只是用到的数据库的其实并不多因为我之前只是做了一些隐身我其实只是用了一个Insert method还有一个Get method只有这两个 method所以我们只要保证这两个 method工作那之前代码就会工作之前我们的文档有插入到一个2Telegram这个集合还有Telegram Response这个集合还有一个是这个Logcode这个集合LogCore其实是在这里定义的这定义的叫logs所以我们现在要创建三个数据库数据起来因为我在代码里面没有去创建所以我们现在手动用代码来创建一下正好演示一下我怎么样使用这个新的Rish Heart这个数据库好回到我们这个Google AppScreen这是我刚才新加的Rish Heart数据库的文件这边也是定义了一些类似的方法最后呢我把Mango给于Rish Heart所以在代碼裡面不需要把mango改成Luxart直接用Luxart就可以了現在我來演示一下怎麼樣添加一個數據集合這replace function可以用來替換某個集合合中的某個固定的文檔但如果你沒有這個文檔連接進去直接只有一個集合名字的時候然後這樣可以用來創建一個新的集合好這邊要創建一個新集合叫做2Telegram然後給它一個description這個是給它一個描述這個時候我們運行一下好,應循完畢這個時候我們刷新在這裡我剛才把數據庫清了一下這邊只有三個集合一個是delimit,一個是test另外一個是2Telegram就是我們剛剛夾進去了那如果我們要商除一個數據集合怎麼做呢好我們現在先來拿到我們的最後集合這樣我們拿到我們的集合比如說我們要商除這個集合我們只要複製這個id然後把它放在這個位置然後這邊改成delete好那我們複製一下這個好,现在我先不用它,这样跟你解释那如果我们这样去删除这个数据集合,直接send会出错,因为你要提供etap因为删除一个数据集合是一个比较危险的操作所以呢,它不让你直接这样进行它需要你提供etap去保护它这个时候我们要在我们的head里面我们这里要加一个ifmatch這邊加個if matchif match這邊加個if match然後在這個地方把剛才的etake上貼進來上貼進來以後再send好 這樣就成功了好 我們把這個勾去掉然後這個合作我們回到git我們再來就get這個一下那就不存在了已經被封除了所以我們在這個地方這個東西如果我們刷新一下這個頁面就這樣它已經被封除了好 這樣就是怎麼樣删除删除当然同样可以用在代码里面去实现我这边有一个Delete function我这边有一个remove可以用来删除集合中匹配这个query的文档但是它不能用来删除整个数据集合因为这操作比较危险所以我在代码里面就没有去加这个etag如果你想在代码里面去删除一个数据集合的话你需要在gitDelete option里面就是這個地方這個header 裡面加這個if match這個ecap是不是在if match這邊要加一個if match 的header然後你要從那邊pass 進來一個參數這邊我就不演示了一般來說我們也很少去做一些刪除數據幾何的操作那現在呢我剛才已經出了這個那又沒有刪掉了現在已經沒有所以我們要建立這三個幾何對不對所以我們現在把它全部建立一下保存然後運行好 運行完了那現在我回到這裡如果現在刷新的話你看到三個集合出來了好 這樣子這樣不好看對不對所以我們把這個複製一下把它放在這個一方 粘貼然後排一下 過來可以看到Logs 在這裡Nodad Green Spawns 也有了Todad Green也有了好 這樣 這三個集合就有了好 集合鑽鍵完畢那現在我們就要改我們的代碼去使用新的東西新的function所以我們在我們的代碼裡面來到這裡我們實際上使用的地方我們就只有這個代碼.js這個文件裡面有三個insert還有一個getinsert的語法完全沒有變就是名稱然後有數據跟我們新的我們新的reachart的insert使用就是這個一模一樣所以根本不需要改不需要改我可以在這邊演示一下怎麼樣做一個音色首先我簡單的演示一下把這個先不要了好這個地方我們打開然後我們這邊有一個數據集合叫LOGS該我們創建的這個LOGS對不對我們現在要把製作數據插入到這個LOGS把這個音色命令就行了好這樣 跑一下好 成功成功的話回到這個地方所以我們看看新的Logs有什麼Logs可以看到TestTest就這樣這樣就加進去了這就是什麼可能加進去的數據再加一個TestTest2好再掛一下看到沒有TestTest2進去了所以呢Insert是完全是同樣的格式所以完全不需要改所以我們唯一要改的就是這裡我們這邊有一個mangoto.getget的格式原來是數據庫集合然後query其實get的結合get本身也是不需要改但是query不一樣query我們要改一下所以我們到代碼這邊是114行這裡get method實際上還是一樣一個collection一個query所以說get method沒什麼好改的但是query的格式有變因為我們現在用的是rishpush所以它裡面query是不一樣的q要改成filters要改成sortl改成page size這樣那這樣子呢我們就可以工作唯一的改變就是在這一行之前的代碼唯一需要改的就是這一行改完這一行,它就應該會工作了這個地方其實,因為我上次這個我之前出了一個教程是講怎樣刪除之前一條歡迎消息的那後來我又出了一個教程,怎樣去踢一個新路群的用戶所以我其實這個刪除新路群消息的這段代碼其實已經沒有使用了所以這段代碼也改了,因為其實我們現在雖然改了,也不一定要用到那我就告诉大家需要这样去改好那现在呢我们就把这个机器人发布一下那我们就然后再来看我们数据库里面是不是有有插入的数据好这边点发布不所谓应用然后这边输入新建然后更新这样我们的机器人就更新了我们机器人到底现在功不功做呢不知道我们试一下隨便發一條消息Hi好機器人沒有完全工作我們先還是走一下Test因為很多東西不清楚會只發生所以我們現在來隨便Test一個問題Test this tool這個票好這樣子然後我來跑一下位置關心這邊有一個Lock Call 會定義好Lock Call這邊有一個Call 但這個是Lock Call剛才感覺Locks 剛才我就直接HardCode去LocksTest一下好摔心放下來了沒有問題OK我們現在再试一下发布先进去确定那我再试一下好,YESA回来了所以说现在机械人有工作了嗨嗨好 機器人又工作了停一個人出去現在幫我們進來這位小器也還工作機器人是好的好 現在沒問題那現在就是說我們現在這個機器人會插入新的數據到我們新的數據庫裡面它已經不連在舊的數據庫了所以我們現在來看一下新的數據庫裡面的東西我們現在把新的數據塞在LOPS裡面看一下馬上就掛了很多數據怎麼樣呢我們剛才把一些數據放在了發送給Tay哥人小姐就放在這看在這裡了所以剛才發了什麼消息呢我們來看一下這個放在這裡然後拍一下看發的消息是什麼這個星星啊用手號How are you?Hi這些就是在2daygram裡面的東西每個叫80gram每個贊助然後是這裡這些東西就這罐回來給我們这种一样我们翻这里看一下这样一个类型好这就是我们写进数据库的类型如果你们读取数据库的话就用这个GateMetaGateMeta然后给它一个Query就可以读出来了就像我刚才这个代码Query写法跟之前是一样的像这样子這個寫法這個寫法Perry寫法並沒有改變只是在最後這個地方稍微的改一下Cue 感覺Filt不要改什麼Pitch Size那具體這些Perry怎麼用呢可以直接到Risk Hub 這邊Futorial 看一下它有一些基本的用法怎樣讀取數據庫怎樣創建數據庫得到數據庫串建集合得到集合然後這樣串建兩個文檔然後碼到所有的文檔碼到其中一個文檔然後或者是query文檔使用這個使用它的query這些直接是你看就行了你可以看到的選擇是用filt對不對好,裡面可以去使用我這個數據庫大家換你使用反正不用它了用它的這個user2這個數據庫就是給大家玩的它的用戶名就是user2然後密碼就是change it我們直接去使用它然後就可以去熟悉這個數據庫如果你想創建一下自己的數據庫服務器沒有問題以後這邊有個教程我之前寫了一個博客就是在這個地方就是教你怎麼樣在本集置建MangoDB10號的服務器文章有點長其實東西並不複雜看完這個你就可以知道怎样创建自己的Wishar服务器你自己创建的服务器就不止user2这个数据库可以使用你可以创建很多的数据还怎么整整都可以这个教程是针对在Windows底下架设但是它整个架构是基于Docker所以在VPS在Linux底下也是可以使用的没什么问题当然要稍微改一下如果有小伙伴觉得他不太喜欢文字的教程比较喜欢视频的教程那你们可以在视频下方给我留言如果人数多的话我就会出一个视频教大家怎么样创建一个Gristoff服务器今天的教程就到这里如果喜欢本教程的话不要忘了给这个视频点赞还有订阅一下我的频道还有呼吁一下大家把我的视频转发出去我这个Telegram教程花了我不少的时间然后也很多小伙伴说这个教程做得挺好的但是好像看的人并不是非常的多可能是你们不要避走之争好东西分享继续只有分享了我们才会共同进步OK谢谢大家的观看我们下期再见拜拜

=== Telegram_Bot_回声机器人代码详解.txt ===
请不吝点赞、订阅、转发、打赏支持明镜与点点栏目。更多的功能的时候却无从着手，所以他就非常有心的做了这个视频，对我的代码进行更详细的解释。我也看了一下这个视频，的确是对我的代码的基本上所有的地方都有一个更详细的讲解，的确是补充了我之前没有考虑到的地方，相信对没有编程基础的小伙伴是可以提供不小的帮助的。当然，视频制作者本身并不是学习这个专业的，所以如果里面有一些不准确的地方，也请大家多包容。

OK，废话不多说，就开始今天的视频吧。大家好，欢迎来到风歌分享，我是苏文。很多小伙伴都看过风歌关于机器人的这一系列视频，但是看的人很多，会用的人很少，这是为什么呢？主要是大家都把这个代码给抄下来了，但是最后这个代码该怎么使用，它们所包含的意思其实大家都是不知道的。所以说，导致大家都会抄会用，但是改就太麻烦了。所以说，我们今天呢，就从第二节回声的机器人的原代码来做一个详细的讲解。

回声机器人的代码呢，可以去封锁的网站。如果没有听错的话，我是直接把回生的机器人的代码就这样直接照搬过来的。好，我们看一下这个代码的意思。Faction它的意思就是声明一个函数，这个函数的名字是你可以随便改写的，就比如说什么DoPost这些。这个函数的名字呢，是你可以随便写的，但是DoGet的意思呢，就是如果你有一个请求do get的请求，他就会运行下面这段代码，发送一个hello world。他如果是一个do post的请求的话，他后面就会跟了一个参数，这个参数呢，我们放在e里面，然后我们就把这个参数给解析出来，然后这个body就等于jason pass解析出来的这个参数，它叫body。然后我们在这个body放在这个下面去判定，这个也是个函数，你可以把它你可以任何声明一个函数，你也可以把它改一些改个名字叫测，如果你英文不好的话，可以把它改成中文测试。然后我们把下面的这个函数名字给改了测试，好，它也是个函数，它也是可以正常运行的。它这句话这段代码的意思就是，它等于一个函数，然后这个函数会传递一个参数，传递的一个参数是什么呢？这个参数就是body，这个body从哪里来呢？就是从这个e里面解析出来的body。好，然后我们把这个body的话就传送到这个下面来了，然后这个function就会再判定这个body，然后我们又创建了一个palend，然后这里就判定这个body这里面有什么，他如果body.message.test，那就证明他body里面是一个文本或者是一个文字。ifbody.message.sticker，他的意思就是如果这个请求是一个贴纸，然后下面这里就是photo，然后我们就判定了几个东西，第一个他是不是文字，是文字的话呢，我们就给他发一个文字回去，第二个看他是不是sticker，如果是一个贴纸如果是，我们就给他回一个贴纸过去，第三个看他是不是一个photo，如果他是图片的话，我们就给他回一个图片回去。好，如果这三个判定下来都没有的话，我们就给他返还一个还是返还一个文字，或者就是这个文字的内容我們是可以隨便更改的，比如說我寫一個我不知道你發送的什麼，所以這邊body的Message的text實際上是測試這個text裡面有詞，而不是說它是不是有這個text，然後routine這個parant去哪裡呢?不好意思,剛剛那個大小寫的事情written parent 去哪里呢?我们把这个这个单词应该是练做payload，我们看一下这个里面这个函数该怎么运行，我们先是一个 parentwritten到这里来了，我们这个函数没关系我自己练的也不是很准给传递下去了，然后经过一系列判定它会返回一个parlent，返回的parlent它就会是在这里，这一段代码的意思就是它会返回一个parlent，这个parlent就是我们下面所判定之后的一个产物，然后我们就就创建一个参数叫parent，parent就是等于这个parent，然后我们再创建一个参数叫date，然后这里方法它是post加parent的话，它里面有个parent，parent的话就是这个参数就是我们刚刚判定所得到的产物，就是返回一个东西它就叫parent，然后我们再创建一个方法叫post，然后我们下面就直接使用这个方法all fetch up.fetch，然后我们把这一系列东西弄好之后，我们把它传递到这个网页里面去，这个网页的话我们后面会跟着加上一个参数，这个参数呢是我们最开始的这个palend。

好了，不知道大家有沒有聽懂，可以到群裡面來反饋，也可以在下面留言，如果沒有聽懂的話，我就再出個視頻把這個教程再寫詳細一點，如果聽懂的話呢，我就開始講下一張，然後謝謝大家觀看。OK，視頻發完了，我覺得還不錯，不像是一個做視頻的新手，感覺還是蠻老練的，就到这里，喜欢这个视频的话，不要忘了点赞、订阅还有转发，我们下期再见，拜拜。

=== Telegram_Bot_使用机器人管理群_限制用户_踢出用户.txt ===
请不吝点赞、订阅、转发、打赏，支持明镜与点点栏目。

就像一些自动禁言的机器人一样，有人加群的时候，我们会判断这个人是不是会发广告或者会发一些乱七八糟的东西，然后我们把它禁言。大多数这样的机器人都有维护自己的数据库，有他们自己的黑名单，然后根据这个黑名单来禁言这些新入群的用户。

那今天我没有介绍这么复杂，今天就是判断这个用户的名字，如果他的名字包含“广告”两个字，我们就把它给禁言或者是把它踢出去这样子。当然，你如果是根据这个用户的ID，然后在ID里面去查找你自己的数据库，然后根据你自己的数据库来对这个用户进行不同的操作呢，也是可以做到。我们第八节课有讲到数据库，所以说如果你想建一个自己的数据库，你就自己去建一个数据库，然后通过数据库来对用户进行操作。

OK，那我们就开始今天的教程吧。好，这边我首先打开了我们的Telegram机器人的代码，这是我们三节课的代码。那我们之前有讲过怎么样发送欢迎消息，也就是如果有人入群的话，我们发送一个欢迎的消息来欢迎这个人。那其实我们的禁言机器人也是一样的，使用的是有人入群这个事件，所以当有人入群的时候，我们去判断这个人，然后再根据这个人来做不同的操作。

那今天我们的判断非常简单，就判断这个人的名字是不是包含“广告”两个字，如果包含“广告”两个字，我们就把它禁言或者是说把它提出去也可以，这两个不同的操作我倒会演示一下。好，回到我们的代码，可以看到我们的代码里面这一块就是欢迎消息的一个处理，就是如果里面是一个NewChartMember的话呢，我们就会打出“你好，欢迎加入本群”这样一个消息。

那我们现在来先试一下这个代码，这个机器人测试群里面有我们的机器人，所以我现在要加一个人进来，我先把这个人移除，你看他这个机器人是工作的，你可以看到他移除的时候他会发一个消息。那我们先把他加进来，加进来可以看到“你好，分割新西兰，然后欢迎加入本群”，好，这个就是我们这个机器人发出来的消息，这两个消息是另外一个机器人发的，这边不要管它。

好，那说明这个是我们之前的机器人还正在工作，那我们就要改动这段代码来实现我们今天的一个用户的禁言。那现在我们先做第一个改动，这第一个改动就是我们不管这个用户是谁，一进来我们就把它给禁言了，之后我们再来加入对这个人的名字的判断。

好，我们之前这个机器人他还会在有人加入的时候发送一条新的欢迎消息，还会删除之前的欢迎消息，这块代码我们就不需要了。好，那这边就是发送欢迎消息的代码，那我们把它改一改，这个payout要改掉一个新的payout的上贴进来了。那这个payout它做什么呢，它就是用来限制一个用户，然后这边chartid就是我们的chartid，所以在这个地方我们可以看到应该是之前的代码是body.message.chatid，所以把这个复制一下，我再度一下。

好，这个地方改成这个，然后这个UserID应该是这个User的ID，然后这边UserID就是body.message.from的ID，这边就是这个用户可不可以发消息，可不可以发媒体消息，可不可以发其他消息，可不可以发网页预览，这边就是全部都是FORCE，也就是全部禁用，全部禁用，我们把这个删掉，这个就不要了。

好，那这样就是我们的最终代码，这边叫PALOTO2，所以我们把它改成PALOTO2，所以当我们有一个新的成员加入群的时候，我们就把它给进来。好，我们现在把这个保存一下，然后发布一下。我忘了一件很重要的事情，你要让这个机器人可以去管理这个群，可以去禁用用户的话，你要让这个机器人是管理员，因为现在这个机器人不是管理员，所以他做不了这个操作，所以我们现在把这个机器人加上管理员线。

好，这是我们的机器人，我们右键点击这个机器人，然后点promote.model.admin，然后这边save一下，那现在呢我们的机器人是管理员了。好，刚才犯了一个错误，这边应该是neutronMember.id，好这样子我们重新发布一下，我们现在把这个用户移除，然后把这个用户加回来。

OK，我们现在再来查扫一下LaysonActions，可以看到这个机器人做了什么事，把这个新用户的权限去掉事项。好，那么这已经工作了，那如果现在我回到这里，你就发现我这个用户就是刚才被移除的这个用户，他已经不能说话了，没有办法无法说话了，因为毕竟被那个机器人禁用了。

好，我们把它解禁一下，好，我们点到我们点manage group，然后这边有个restrictive users，然后点这个，然后把这个群够上，然后SaveClose，好，这样呢我们就把这个用户剪禁了，因为那个用户就剪禁了，好，又可以讲话了。

好，那这就是怎么样把一个新用户给禁用的方法，非常简单的一个方法。那现在呢我们就是说我们不要去盲目的去禁用所有新加入群的小伙伴，我们应该去做一些判断，然后再来对这个小伙伴进行操作。然后这边的例子非常简单，就是判断这个它的名字里面是不是有“广告”两个字，如果有“广告”两个字我们才进行安解，否则的话我们可能就不管它了。

OK，所以现在我们就等于是在我们的代码里面我们要加一个条件去判断这个，回到我们的代码，我们在这个地方我们加一个条件，就是我们在push这个payload之前，我们加一个条件，我们去判断Body.Message.NewChartMember，我们之前有一个叫gainname的方法，可以得到它的整个的用户名，所以我们这边直接call这个Membergainname，然后NewChartMember，这样子就会拿到它的名字，如果名字里面有什么有“广告”两个字，那我们就会把它给禁用，所以我们就用index of，那意思是“广告”大于等于0，如果名字中包含“广告”两个字，这条就会运行里面的代码，然后就把这个放进去，就是我们会把这个payout，否则的话就不把这个payout。

那当然这个条件的话，我们就可以加一些比较复杂的条件，如果你知道正则表达式的话，你就可以做一些比较复杂的判断，那我本人对正则表达式是非常的精通，所以你们如果有什么问题可以在群里面直接问我。那这边呢做演示的话，我就让它简单一些，好，我们存一下这个文件，好，保存完了，我们现在呢来发布一下，好，发布完成，那这时候呢我们重新来刚才的操作，如果我把这个用户加进来的话，它不应该被禁言了，因为它没有“广告”两个字，所以我现在把这个用户加进来，好，那现在的话我们来看一下我们群的操作纪录，发现已经没有

=== Telegram_Bot_使用机器人定时发送消息与图片_Telegram_bot_机器人编程系列_-_第十二集.txt ===
请不吝点赞、订阅、转发、打赏支持明镜与点点栏目。有功能是非常的简单，所以呢之前我都没有讲。之前有小伙伴在群里面问，所以我也在群里面回答，就是使用触发器。那有的小伙伴就学会了，那有的小伙伴还是不太明白，因为这部分内容真的很简单，所以我之前是没有计划出这个视频的。但是既然还有小伙伴问，那今天我就把这个视频发出来。

今天我主要是讲两个东西，一个是用谷歌的触发器来触发这个函数，让它自动的发消息。另外我还会教大家怎么样手动的通过一个网址来触发事件。那现在就开始我们今天的教程吧。我们回到谷歌的Appscript，然后这个地方回到我们的机器人，我们新建一个文件，新建一个脚本文件叫做定时任务。好，把这个默论的代码删除，然后我们加入这样一个函数，我们利用这个函数来发送一条消息。这边ChartID就是填写你想要发送的对象，这边可以是一个Telegram的用户，也可以是Telegram的群。那这边是我自己的ID，所以这条消息会发给我。然后这边是消息的内容，所以你必須知道你要發送的群或者用戶的ID。那這個ID怎麼找呢？之前我出過一個數據庫的視頻，如果看過這個視頻的小夥伴，如果小夥伴們有跟著這個視頻建立一個數據庫，可以把機器人收到的消息存入數據庫，然後在數據庫裡面查到各種ID。我們保存一下，然後選擇這個，然後運行一下。应许完以后就可以看到这边收到一条这是一条定时发送的消息。这样一条消息是因为我看从这边运行的，实际上这个发送是这样一条消息。那这个消息是因为我刚才在这边运行的，它现在还不是定时任务，这是发送消息的。那我怎样把它变成一个定时的任务呢？其实非常的简单，你这边点击修改，然後點擊當前項目的觸發器，然後這邊點擊添加觸發器，這邊選擇我們剛剛寫的這個行數，然後這邊其實我們應該先部署一下，部署一下你可以選擇版本，我這邊有部署的話就選擇最新測試版，然后选择时间驱动，然后这边选择你可以选择一个特定的时间和日期。那今天我们这个演示里面我选择一个分钟定时器，然后每分钟，然后点击保存。好，那现在呢就一个触发器了，触发器已经设置好了，你也可以手动的触发，你可以在这个地方选择脚本自信，然后呢好已经完成了。完成以後呢可以看到這邊又發了一條過來，這是我手動出發的。那現在這個出發器已經設置好了，所以呢我現在不需要手動自發，它每一分鐘都會執行一次。所以我們現在把這個時間打開，那我們現在什麼也不動，等待一分鐘。好，看到沒有，它已經發了一條消息出來了。再上的時候剛才是到30幾秒的時候發了一條，那估計再到30幾秒就會發一條。好，又收到一條。好，所以每分鐘都會收到一條，你看這邊可以看到它發送了三次。好，然後這邊我們回到這裡。好，這個一直在發很討厭，所以我先把它上掉，我就把这个厨房级给删除了。现在我来演示一下怎么样发送图片。发送图片的话我们首先需要发个图片，这个简单的图片我们要得到图片的ID。所以呢我们要把这个图片首先发给我们的机器人，把这个图片发给机器人以后，因為這是個回生機器人，所以他會把圖片發給我，這沒有關係。現在我們就要找到這個圖片的ID，因為我之前我有設置這個數據庫，我會把所有收到的消息都記錄在數據庫裡面，可以看到我剛才收到的消息是這一條，這邊可以看到我的Photo的ID，然後我們選擇最高的分辨率也就是這個，這個的ID，這個就是我們圖片的ID。這邊我先加一個函數，這個函數是用來發送圖片的，然後呢也是發給我自己，我的ID，圖片的ID就是我們剛剛找到的ID，所以是這個ID，把它放在這個地方，然後保存一下。現在測試一下這個函數，看看是不是工作，我們把它把這個選擇然後運行，你看到這邊收到了，這就是我們剛才發的這個圖片。那現在我們就把這個設成定時任務，我們回到項目觸發器，添加觸發器，然後就選擇我們剛剛創建的那個送好这边要刷新一下，刷新一下页面，刷新完页面以后我们刚刚新加的函数才会出现，这边AutoSend Photo，同样的我们把它选择分钟定时器，每分钟保存，这样我们有一个新的触发器了。那当然你可以添加很多触发器，然后就可以做很多不同的事情。那我们现在把这个时间打开，那过一会我们就收到了，收到了。好，現在已經收到了，我把它刪了。關於這個MangoDB我要講一下，這個MangoDB我之前有一個視頻是介紹怎樣使用這個MangoDB的，但是我之前介紹大家使用的是那個MLab的網站，但是這個網站現在整個公司都已經被收購了，收夠以後呢，這網站不再允許新的用戶去註冊，所以呢，如果還沒有註冊過的小夥伴就用不了這個服務了。當然也有解決方法，我是自己又重新架設了一個服務器，用自己的服務器，那是用mangoDB怎樣自己架設的服務器呢，這個我可能後面會出個視頻教大家。那現在如果沒有mangoDB的朋友只能用其他的方法去取得图片的ID。好，我剛才說可以選建很多的觸發器，讓每個觸發器執行不同的函數，但實際上有時候我們也不需要很多的觸發器，如果我們是希望這條消息和這個圖片同一個時間被發送，我可以把它寫成一個單獨的函數，然後包含這兩個命令。我這邊加一個函數AutoTask，然後從這個函數裡面去分別的去調用這兩個函數，那麼我再把這個函數設置觸發器，我先保存一下，然後我現在先直接試一下這個函數運行，那我這樣運行的話它就會先調用這個再調用這個，所以會收到兩條消息，會收到這個和這個，所以直接兩條消息就收到了。我們也可以直接把這個行數設置成觸發器，這邊點添加觸發器，然後選擇AutoTask這個行數，然後再選擇分中定時器，每分鐘保存，回到Telegram，我們再來看看我們的時間，看到沒有，我們收到了兩條消息，同一個觸發器發出來的兩條消息。好，現在我就把它刪了，不然它會一直給我發。好了，這就是怎樣使用觸發器來完成一个定时的任务。如果你想提早触发这个事件，那你当然可以去触发器里面去像我刚才那边直接去执行这个脚本，那你要登录进来这边会比较麻烦，有没有一个非常简单的方法去触发它吗？可以哦，我们再加一点简单的代码就可以，我们到代码这个文件，然後在doGet裡面我們加一段代碼，我們加入這一段代碼，這段代碼很簡單，它的意思是說如果我的我收到一個HTTP的請求，然後在請求裡面有runAutoTask這個參數的話呢，我就會去跑這個命令，它就會觸發這個事件，這邊就是會把我們收到的倉書打印出來而已，然後我們這邊保存一下，保存完我們發布，發布的時候我們先把這個網址複製一下，複製完以後我們發布，好，發布完剛才那個網址就是我們的機器人的網址，如果你直接點進來呢，你會收到一個HoloWordNoneEastern Should Be Hidden，那這個網子的確是一個隱密的網子，我們不希望任何人知道，那用這個網子我們可以用來手動的觸發我們想要的觸發的事情，所以在這個地方我們加一個問號，我們加個問號，然後這邊我們剛才設置的参数叫做 runAutoTask，runAutoTask等于 true，其实等于什么都没关系，加一个东西就行了，好，等于 true，然后这时候会打显示出处来，那你同时会收到两条消息，那这是因为我们手动的触发了AutoTask这个参数，就是我登录这个网址的时候，我給了這個問號後面這段參數，那這個參數呢其實就會跑到這裡面的代碼來，然後它就會去跑這個AutoTask，那就是跑這裡，然後最後就會發這兩個消息出來，那這就是我們怎麼樣手動的去觸發我們想要觸發的任務。好了，是不是非常的簡單，因为这个触发器是Google Apps Script本身之带的一个功能，所以我们根本就不需要写多余的代码去写这个触发器，也不需要写什么计划任务什么的。好了，今天的教程就到这里，关于数据库的话，如果大家有兴趣的话，可以在视频下方给我留言。好了，那今天的教程就到这里，喜欢这个视频的话别忘了点赞、訂閱還有轉發，我們下期再見，拜拜。

=== Telegram_Bot_使用Cloudflare_CF_worker_制作回声机器人.txt ===
字幕志愿者 杨茜茜字幕志愿者 杨茜茜2222222222222我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我可以做的我

优优独播剧场——YoYo Television Series Exclusive

i know you字幕志愿者 李宗盛我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的我可以做到的

1分钟字幕志愿者 杨茜茜字幕志愿者 杨茜茜

优优独播剧场——YoYo Television Series Exclusive

字幕志愿者 杨茜茜字幕志愿者 杨茜茜请不吝点赞 订阅 转发 打赏支持明镜与点点栏目

字幕志愿者 杨栋梁字幕志愿者 杨栋梁

优优独播剧场——YoYo Television Series Exclusive

优优独播剧场——YoYo Television Series Exclusive

字幕志愿者 杨栋梁字幕志愿者 杨茜茜字幕志愿者 杨茜茜字幕志愿者 杨茜茜字幕志愿者 杨茜茜

优优独播剧场——YoYo Television Series Exclusive

字幕志愿者 杨栋梁字幕志愿者 杨茜茜请不吝点赞 订阅 转发 打赏支持明镜与点点栏目

